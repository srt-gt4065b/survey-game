{"version":3,"file":"static/js/357.927625b9.chunk.js","mappings":"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","sources":["firebase/config.js","components/QuestionCard.jsx","components/GameHeader.jsx","screens/SurveyGame.jsx"],"sourcesContent":["// Firebase ÏÑ§Ï†ï ÌååÏùº\r\n// ÍπÄÍµêÏàòÎãòÏùò Firebase ÌîÑÎ°úÏ†ùÌä∏ Ï†ïÎ≥¥\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getFirestore, enableIndexedDbPersistence } from 'firebase/firestore';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { getAnalytics, isSupported } from 'firebase/analytics';\r\nimport { getStorage } from 'firebase/storage';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBqp2_7rcy55Et1NkfRMegiLr5eBIt-N-Q\",\r\n  authDomain: \"ecis-fall2025-survey.firebaseapp.com\",\r\n  databaseURL: \"https://ecis-fall2025-survey-default-rtdb.asia-southeast1.firebasedatabase.app\",\r\n  projectId: \"ecis-fall2025-survey\",\r\n  storageBucket: \"ecis-fall2025-survey.firebasestorage.app\",\r\n  messagingSenderId: \"241188755914\",\r\n  appId: \"1:241188755914:web:cc9242e9c1ccf0c17f9733\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n// Initialize services\r\nexport const db = getFirestore(app);\r\nexport const auth = getAuth(app);\r\nexport const storage = getStorage(app);\r\n\r\n// AnalyticsÎ•º ÏïàÏ†ÑÌïòÍ≤å Ï¥àÍ∏∞Ìôî (measurementId ÏóÜÏñ¥ÎèÑ ÏóêÎü¨ ÏïàÎÇ®)\r\nexport let analytics = null;\r\nif (typeof window !== 'undefined') {\r\n  isSupported().then(supported => {\r\n    if (supported) {\r\n      try {\r\n        analytics = getAnalytics(app);\r\n      } catch (error) {\r\n        console.log('Analytics ÎπÑÌôúÏÑ±ÌôîÎê®');\r\n      }\r\n    }\r\n  }).catch(() => {\r\n    console.log('Analytics ÏßÄÏõê ÏïàÎê®');\r\n  });\r\n}\r\n\r\n// Ïò§ÌîÑÎùºÏù∏ ÏßÄÏõê ÌôúÏÑ±Ìôî (ÌïôÏÉùÎì§Ïù¥ Ï§ëÍ∞ÑÏóê ÎÇòÍ∞îÎã§ ÏôÄÎèÑ Îç∞Ïù¥ÌÑ∞ Î≥¥Ï°¥)\r\nenableIndexedDbPersistence(db).catch((err) => {\r\n  if (err.code === 'failed-precondition') {\r\n    console.log('Ïò§ÌîÑÎùºÏù∏ ÏßÄÏõêÏù¥ Ïù¥ÎØ∏ Îã§Î•∏ ÌÉ≠ÏóêÏÑú ÌôúÏÑ±ÌôîÎêòÏñ¥ ÏûàÏäµÎãàÎã§.');\r\n  } else if (err.code === 'unimplemented') {\r\n    console.log('ÌòÑÏû¨ Î∏åÎùºÏö∞Ï†ÄÎäî Ïò§ÌîÑÎùºÏù∏ ÏßÄÏõêÏùÑ Ï†úÍ≥µÌïòÏßÄ ÏïäÏäµÎãàÎã§.');\r\n  }\r\n});\r\n\r\n// Firestore Ïª¨Î†âÏÖò Ïù¥Î¶Ñ ÏÉÅÏàò\r\nexport const COLLECTIONS = {\r\n  SURVEYS: 'surveys',\r\n  RESPONSES: 'responses',\r\n  USERS: 'users',\r\n  LEADERBOARD: 'leaderboard',\r\n  ACHIEVEMENTS: 'achievements',\r\n  QUESTIONS: 'questions',\r\n  ANALYTICS: 'analytics'\r\n};\r\n\r\nexport default app;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./QuestionCard.css\";\r\n\r\nconst QuestionCard = ({\r\n  question,\r\n  questionNumber,\r\n  totalQuestions,\r\n  overallNumber,\r\n  overallTotal,\r\n  onAnswer,\r\n}) => {\r\n  const { text, type, options, section } = question;\r\n\r\n  // [ÏïàÏ†ÑÏû•Ïπò] typeÏù¥ undefinedÏùº Í≤ΩÏö∞ ÏóêÎü¨ Î∞©ÏßÄ\r\n  const safeType = type || \"\";\r\n  const isMulti = safeType.toLowerCase().includes(\"multi\");\r\n\r\n  // Ï¥àÍ∏∞ ÏÉÅÌÉú ÏÑ§Ï†ï\r\n  const [selected, setSelected] = useState(isMulti ? [] : \"\");\r\n\r\n  // [Ï§ëÏöî ÏàòÏ†ï] question Í∞ùÏ≤¥ ÎåÄÏã† questionNumberÍ∞Ä Î∞îÎÄî ÎïåÎßå Ï¥àÍ∏∞Ìôî\r\n  useEffect(() => {\r\n    setSelected(isMulti ? [] : \"\");\r\n  }, [questionNumber, isMulti]); // question Í∞ùÏ≤¥Î•º ÎÑ£ÏúºÎ©¥ Î¨¥Ìïú Î£®ÌîÑ Î∞úÏÉù Í∞ÄÎä•ÏÑ± ÏûàÏùå\r\n\r\n  const likertScale = [\r\n    \"üòç Strongly Agree\",\r\n    \"üôÇ Agree\",\r\n    \"üòê Neutral\",\r\n    \"üòï Disagree\",\r\n    \"üò° Strongly Disagree\",\r\n  ];\r\n\r\n  const finalOptions =\r\n    safeType.toLowerCase() === \"likert\"\r\n      ? likertScale\r\n      : normalizeOptions(options);\r\n\r\n  const handleOptionClick = (opt) => {\r\n    if (isMulti) {\r\n      if (Array.isArray(selected)) {\r\n        if (selected.includes(opt)) {\r\n          setSelected(selected.filter((item) => item !== opt));\r\n        } else {\r\n          setSelected([...selected, opt]);\r\n        }\r\n      } else {\r\n        // ÌòπÏãúÎùºÎèÑ selectedÍ∞Ä Î∞∞Ïó¥Ïù¥ ÏïÑÎãê Í≤ΩÏö∞ Î¶¨ÏÖã\r\n        setSelected([opt]);\r\n      }\r\n    } else {\r\n      setSelected(opt);\r\n    }\r\n  };\r\n\r\n  const isNextActive = isMulti \r\n    ? (Array.isArray(selected) && selected.length > 0)\r\n    : !!selected;\r\n\r\n  return (\r\n    <div className=\"question-card fade-in\">\r\n      <div className=\"q-header\">\r\n        <div className=\"q-section\">{section}</div>\r\n        <div className=\"q-progress-group\">\r\n          <div className=\"q-progress-chapter\">\r\n            Chapter: {questionNumber} / {totalQuestions}\r\n          </div>\r\n          <div className=\"q-progress-overall\">\r\n            Overall: {overallNumber} / {overallTotal}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <h2 className=\"q-text\">\r\n        {text}\r\n        {isMulti && (\r\n          <span style={{ fontSize: \"0.7em\", color: \"#666\", marginLeft: \"10px\", fontWeight: \"normal\" }}>\r\n            (Select all that apply)\r\n          </span>\r\n        )}\r\n      </h2>\r\n\r\n      {safeType !== \"text\" && (\r\n        <div className=\"q-options\">\r\n          {finalOptions.map((opt, idx) => {\r\n            const isSelected = isMulti \r\n              ? (Array.isArray(selected) && selected.includes(opt))\r\n              : selected === opt;\r\n\r\n            return (\r\n              <button\r\n                key={idx}\r\n                className={`q-option ${isSelected ? \"selected\" : \"\"}`}\r\n                onClick={() => handleOptionClick(opt)}\r\n              >\r\n                {isMulti && (isSelected ? \"‚úÖ \" : \"‚¨ú \")}\r\n                {opt}\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {safeType === \"text\" && (\r\n        <textarea\r\n          className=\"q-textarea\"\r\n          placeholder=\"Write your answer...\"\r\n          value={selected}\r\n          onChange={(e) => setSelected(e.target.value)}\r\n        />\r\n      )}\r\n\r\n      <div className=\"q-footer\">\r\n        <button\r\n          className={`next-btn ${isNextActive ? \"active\" : \"\"}`}\r\n          disabled={!isNextActive}\r\n          onClick={() => {\r\n            if (!isNextActive) return;\r\n            onAnswer(selected);\r\n          }}\r\n        >\r\n          Next ‚Üí\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ÏòµÏÖò Ï†ïÍ∑úÌôî Ìï®Ïàò (Ï§ÑÎ∞îÍøà, ÏÑ∏ÎØ∏ÏΩúÎ°† Ìè¨Ìï®)\r\nconst normalizeOptions = (options) => {\r\n  if (!options) return [];\r\n  if (Array.isArray(options)) return options;\r\n\r\n  if (typeof options === \"string\") {\r\n    return options\r\n      .split(/[\\|,\\n;\\r]+/g)\r\n      .map((o) => o.trim())\r\n      .filter((o) => o.length > 0);\r\n  }\r\n  return [];\r\n};\r\n\r\nexport default QuestionCard;","import React from \"react\";\r\nimport useGameStore from \"../store/gameStore\";\r\nimport \"./GameHeader.css\";\r\n\r\nconst GameHeader = ({ overallProgress }) => {\r\n  const { user, gameStats } = useGameStore();\r\n\r\n  return (\r\n    <div className=\"game-header\">\r\n      {/* ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏÑπÏÖò */}\r\n      <div className=\"user-info-section\">\r\n        <div className=\"user-avatar\">{user?.avatar || \"üéì\"}</div>\r\n        <div className=\"user-details\">\r\n          <div className=\"user-name\">{user?.name || \"Student\"}</div>\r\n          <div className=\"user-meta\">\r\n            {user?.studentId && <span>ID: {user.studentId}</span>}\r\n            {user?.department && <span className=\"user-dept\">{user.department}</span>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Ï†ÑÏ≤¥ ÏßÑÌñâÎ•† */}\r\n      {overallProgress && (\r\n        <div className=\"overall-progress-section\">\r\n          <div className=\"progress-text\">\r\n            Overall Progress: {overallProgress.current} / {overallProgress.total}\r\n          </div>\r\n          <div className=\"progress-bar-container\">\r\n            <div \r\n              className=\"progress-bar-fill\" \r\n              style={{ width: `${(overallProgress.current / overallProgress.total) * 100}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Í≤åÏûÑ Ïä§ÌÉØ */}\r\n      <div className=\"stats-row\">\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">‚≠ê</div>\r\n          <div className=\"stat-value\">{gameStats?.level || 1}</div>\r\n          <div className=\"stat-label\">Level</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">üíØ</div>\r\n          <div className=\"stat-value\">{gameStats?.experience || 0}</div>\r\n          <div className=\"stat-label\">EXP</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">üî•</div>\r\n          <div className=\"stat-value\">{gameStats?.streak || 0}</div>\r\n          <div className=\"stat-label\">Streak</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ü™ô</div>\r\n          <div className=\"stat-value\">{gameStats?.coins || 0}</div>\r\n          <div className=\"stat-label\">Coins</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameHeader;\r\n","import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { collection, getDocs, orderBy, query } from \"firebase/firestore\";\r\nimport { db } from \"../firebase/config\";\r\nimport useGameStore from \"../store/gameStore\";\r\nimport QuestionCard from \"../components/QuestionCard\";\r\nimport GameHeader from \"../components/GameHeader\";\r\nimport toast from \"react-hot-toast\";\r\nimport \"../components/SurveyGame.css\";\r\n\r\n/** ---------------------------\r\n * ÏòµÏÖò Î¨∏ÏûêÏó¥ ‚Üí Î∞∞Ïó¥ Î≥ÄÌôò (Í∞ïÌôîÎêú Î≤ÑÏ†Ñ)\r\n * ÌååÏù¥ÌîÑ(|), ÏΩ§Îßà(,), ÏÑ∏ÎØ∏ÏΩúÎ°†(;), Ï§ÑÎ∞îÍøà(\\n) Î™®Îëê Ï≤òÎ¶¨\r\n ----------------------------*/\r\nconst getOptionsArray = (options) => {\r\n  if (!options) return [];\r\n  if (Array.isArray(options)) return options;\r\n\r\n  return options\r\n    .split(/[\\|,\\n;\\r]+/g)\r\n    .map((o) => o.trim())\r\n    .filter((o) => o.length > 0);\r\n};\r\n\r\nconst SurveyGame = ({ onComplete }) => {\r\n  const { user, answerQuestion } = useGameStore();\r\n\r\n  const [questions, setQuestions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [currentCategory, setCurrentCategory] = useState(\"\");\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [answers, setAnswers] = useState({});\r\n  const [startTime, setStartTime] = useState(Date.now());\r\n\r\n  const lang = user?.language || \"en\";\r\n\r\n  useEffect(() => {\r\n    const loadQuestions = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const q = query(collection(db, \"questions\"), orderBy(\"id\"));\r\n        const snap = await getDocs(q);\r\n        const list = snap.docs.map((doc) => ({\r\n          docId: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n        setQuestions(list);\r\n        if (list.length > 0) {\r\n          setCurrentCategory(list[0].category);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"‚ùå Failed to load questions:\", err);\r\n        toast.error(\"Failed to load questions\");\r\n      } finally {\r\n        setLoading(false);\r\n        setStartTime(Date.now());\r\n      }\r\n    };\r\n    loadQuestions();\r\n  }, []);\r\n\r\n  const categories = useMemo(\r\n    () => [...new Set(questions.map((q) => q.category))],\r\n    [questions]\r\n  );\r\n\r\n  const filteredQuestions = useMemo(\r\n    () => questions.filter((q) => q.category === currentCategory),\r\n    [questions, currentCategory]\r\n  );\r\n\r\n  const currentQuestion =\r\n    filteredQuestions.length > 0 ? filteredQuestions[currentIndex] : null;\r\n\r\n  const overallProgress = useMemo(() => {\r\n    const answeredCount = Object.keys(answers).length;\r\n    return { current: answeredCount, total: questions.length };\r\n  }, [answers, questions.length]);\r\n\r\n  const getCurrentOverallNumber = () => {\r\n    if (!currentQuestion) return 0;\r\n    return questions.findIndex((q) => q.docId === currentQuestion.docId) + 1;\r\n  };\r\n\r\n  const handleAnswer = (value) => {\r\n    if (!currentQuestion) return;\r\n\r\n    const now = Date.now();\r\n    const timeSpent = (now - startTime) / 1000;\r\n    const qId = currentQuestion.docId;\r\n\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [qId]: { value, timeSpent },\r\n    }));\r\n\r\n    answerQuestion(timeSpent, \"good\");\r\n\r\n    const nextIndex = currentIndex + 1;\r\n    if (nextIndex < filteredQuestions.length) {\r\n      setCurrentIndex(nextIndex);\r\n      setStartTime(Date.now());\r\n      return;\r\n    }\r\n\r\n    toast.success(`üéâ ${currentCategory} Completed!`);\r\n\r\n    const answeredIds = new Set(Object.keys({ ...answers, [qId]: true }));\r\n    const remainingCats = categories.filter((cat) =>\r\n      questions.some((q) => q.category === cat && !answeredIds.has(q.docId))\r\n    );\r\n\r\n    if (remainingCats.length > 0) {\r\n      setCurrentCategory(remainingCats[0]);\r\n      setCurrentIndex(0);\r\n      setStartTime(Date.now());\r\n      return;\r\n    }\r\n\r\n    toast.success(\"üéØ All survey completed!\");\r\n    if (onComplete) onComplete();\r\n  };\r\n\r\n  /** ---------------------------\r\n   * [Ï§ëÏöî ÏàòÏ†ï] useMemoÎ°ú Í∞ùÏ≤¥ Ïû¨ÏÉùÏÑ± Î∞©ÏßÄ (Î¨¥Ìïú Î£®ÌîÑ Ìï¥Í≤∞)\r\n   ----------------------------*/\r\n  const formatted = useMemo(() => {\r\n    if (!currentQuestion) return null;\r\n    return {\r\n      text: currentQuestion.text?.[lang] || currentQuestion.text?.en,\r\n      section: currentQuestion.category,\r\n      type: currentQuestion.type,\r\n      options: getOptionsArray(currentQuestion.options),\r\n      required: true,\r\n    };\r\n  }, [currentQuestion, lang]);\r\n\r\n  if (loading) return <div className=\"survey-container\"><div className=\"loading-screen\">Loading questions...</div></div>;\r\n  if (!currentQuestion || !formatted) return <div className=\"survey-container\"><div className=\"loading-screen\">No questions available</div></div>;\r\n\r\n  return (\r\n    <div className=\"survey-container\">\r\n      <GameHeader overallProgress={overallProgress} />\r\n      <QuestionCard\r\n        key={currentQuestion.docId} // ÌÇ§Î•º Ï£ºÏñ¥ Ïª¥Ìè¨ÎÑåÌä∏Î•º ÏÉàÎ°ú Í∑∏Î¶º\r\n        question={formatted}\r\n        questionNumber={currentIndex + 1}\r\n        totalQuestions={filteredQuestions.length}\r\n        overallNumber={getCurrentOverallNumber()}\r\n        overallTotal={questions.length}\r\n        onAnswer={handleAnswer}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SurveyGame;"],"names":["app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","getAuth","getStorage","analytics","window","isSupported","then","supported","getAnalytics","error","console","log","catch","enableIndexedDbPersistence","err","code","normalizeOptions","options","Array","isArray","split","map","o","trim","filter","length","_ref","question","questionNumber","totalQuestions","overallNumber","overallTotal","onAnswer","text","type","section","safeType","isMulti","toLowerCase","includes","selected","setSelected","useState","useEffect","finalOptions","isNextActive","_jsxs","className","children","_jsx","style","fontSize","color","marginLeft","fontWeight","opt","idx","isSelected","concat","onClick","item","handleOptionClick","placeholder","value","onChange","e","target","disabled","overallProgress","user","gameStats","useGameStore","avatar","name","studentId","department","current","total","width","level","experience","streak","coins","onComplete","answerQuestion","questions","setQuestions","loading","setLoading","currentCategory","setCurrentCategory","currentIndex","setCurrentIndex","answers","setAnswers","startTime","setStartTime","Date","now","lang","language","async","q","query","collection","orderBy","list","getDocs","docs","doc","_objectSpread","docId","id","data","category","toast","loadQuestions","categories","useMemo","Set","filteredQuestions","currentQuestion","Object","keys","formatted","_currentQuestion$text","_currentQuestion$text2","en","required","GameHeader","QuestionCard","findIndex","timeSpent","qId","prev","nextIndex","success","answeredIds","remainingCats","cat","some","has"],"ignoreList":[],"sourceRoot":""}