{"version":3,"file":"static/js/236.ef92afd0.chunk.js","mappings":"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","sources":["screens/Leaderboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { db } from '../firebase/config';\nimport { collection, query, orderBy, limit, onSnapshot, doc, setDoc, getDoc } from 'firebase/firestore';\nimport useGameStore from '../store/gameStore';\nimport './Leaderboard.css';\n\nconst Leaderboard = ({ onBack }) => {\n  const { user, gameStats } = useGameStore();\n  const [leaderboardData, setLeaderboardData] = useState([]);\n  const [activeTab, setActiveTab] = useState('overall'); // overall, department, weekly\n  const [isLoading, setIsLoading] = useState(true);\n\n  // ì‚¬ìš©ì ë¦¬ë”ë³´ë“œ ë°ì´í„° ì—…ë°ì´íŠ¸\n  useEffect(() => {\n    const updateUserLeaderboard = async () => {\n      if (!user.id || !user.name) return;\n\n      try {\n        const userRef = doc(db, 'leaderboard', user.id);\n        const userDoc = await getDoc(userRef);\n        \n        const userData = {\n          id: user.id,\n          name: user.name,\n          studentId: user.studentId || '',\n          department: user.department || '',\n          avatar: user.avatar || 'ğŸ“',\n          level: gameStats.level,\n          experience: gameStats.experience,\n          coins: gameStats.coins,\n          totalPoints: (gameStats.level * 100) + gameStats.experience + (gameStats.coins * 10),\n          questionsAnswered: gameStats.questionsAnswered,\n          lastUpdated: new Date().toISOString(),\n        };\n\n        await setDoc(userRef, userData, { merge: true });\n        console.log('âœ… ë¦¬ë”ë³´ë“œ ì—…ë°ì´íŠ¸ ì™„ë£Œ');\n      } catch (error) {\n        console.error('âŒ ë¦¬ë”ë³´ë“œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);\n      }\n    };\n\n    updateUserLeaderboard();\n  }, [user, gameStats]);\n\n  // ì‹¤ì‹œê°„ ë¦¬ë”ë³´ë“œ ë°ì´í„° êµ¬ë…\n  useEffect(() => {\n    const loadLeaderboard = () => {\n      setIsLoading(true);\n      \n      const q = query(\n        collection(db, 'leaderboard'),\n        orderBy('totalPoints', 'desc'),\n        limit(100)\n      );\n\n      const unsubscribe = onSnapshot(q, (snapshot) => {\n        const data = snapshot.docs.map((doc, index) => ({\n          id: doc.id,\n          rank: index + 1,\n          ...doc.data(),\n        }));\n        \n        setLeaderboardData(data);\n        setIsLoading(false);\n      });\n\n      return unsubscribe;\n    };\n\n    const unsubscribe = loadLeaderboard();\n    return () => unsubscribe();\n  }, []);\n\n  // í˜„ì¬ ì‚¬ìš©ìì˜ ìˆœìœ„ ì°¾ê¸°\n  const getUserRank = () => {\n    const userIndex = leaderboardData.findIndex(item => item.id === user.id);\n    return userIndex !== -1 ? userIndex + 1 : '-';\n  };\n\n  // ëª¨ì˜ ë°ì´í„° (Firebase ì—°ê²° ì „ í…ŒìŠ¤íŠ¸ìš©)\n  const mockData = [\n    { id: '1', rank: 1, name: 'ê¹€ì² ìˆ˜', department: 'AIê²½ì˜í•™ê³¼', level: 15, totalPoints: 1520, avatar: 'ğŸ“' },\n    { id: '2', rank: 2, name: 'ì´ì˜í¬', department: 'ì»´í“¨í„°ê³µí•™ê³¼', level: 14, totalPoints: 1450, avatar: 'ğŸ‘©â€ğŸ“' },\n    { id: '3', rank: 3, name: 'ë°•ë¯¼ìˆ˜', department: 'AIê²½ì˜í•™ê³¼', level: 13, totalPoints: 1380, avatar: 'ğŸ§‘â€ğŸ“' },\n    { id: '4', rank: 4, name: 'ì •ì†Œì—°', department: 'ê²½ì˜í•™ê³¼', level: 12, totalPoints: 1250, avatar: 'ğŸ‘¨â€ğŸ“' },\n    { id: '5', rank: 5, name: 'ìµœì¤€í˜¸', department: 'ì†Œí”„íŠ¸ì›¨ì–´í•™ê³¼', level: 11, totalPoints: 1180, avatar: 'ğŸ¯' },\n    { id: 'user', rank: getUserRank(), name: user.name, department: user.department, level: gameStats.level, totalPoints: gameStats.totalPoints, avatar: user.avatar },\n  ];\n\n  const displayData = leaderboardData.length > 0 ? leaderboardData : mockData;\n\n  // ìˆœìœ„ì— ë”°ë¥¸ ë©”ë‹¬ ì´ëª¨ì§€\n  const getRankEmoji = (rank) => {\n    switch (rank) {\n      case 1: return 'ğŸ¥‡';\n      case 2: return 'ğŸ¥ˆ';\n      case 3: return 'ğŸ¥‰';\n      default: return `#${rank}`;\n    }\n  };\n\n  // ìˆœìœ„ ìƒ‰ìƒ\n  const getRankColor = (rank) => {\n    switch (rank) {\n      case 1: return '#FFD700';\n      case 2: return '#C0C0C0';\n      case 3: return '#CD7F32';\n      default: return '#667eea';\n    }\n  };\n\n  // íƒ­ í•„í„°ë§\n  const getFilteredData = () => {\n    switch (activeTab) {\n      case 'department':\n        return displayData.filter(item => item.department === user.department);\n      case 'weekly':\n        // ì£¼ê°„ ë°ì´í„°ëŠ” ë³„ë„ ì²˜ë¦¬ í•„ìš”\n        return displayData.slice(0, 10);\n      default:\n        return displayData;\n    }\n  };\n\n  return (\n    <div className=\"leaderboard-container\">\n      {/* í—¤ë” */}\n      <div className=\"leaderboard-header\">\n        <button className=\"back-button\" onClick={onBack}>\n          â† ëŒì•„ê°€ê¸°\n        </button>\n        <h1>ğŸ† ë¦¬ë”ë³´ë“œ</h1>\n      </div>\n\n      {/* íƒ­ ë©”ë‰´ */}\n      <div className=\"tab-menu\">\n        <button \n          className={`tab-button ${activeTab === 'overall' ? 'active' : ''}`}\n          onClick={() => setActiveTab('overall')}\n        >\n          ì „ì²´\n        </button>\n        <button \n          className={`tab-button ${activeTab === 'department' ? 'active' : ''}`}\n          onClick={() => setActiveTab('department')}\n        >\n          í•™ê³¼\n        </button>\n        <button \n          className={`tab-button ${activeTab === 'weekly' ? 'active' : ''}`}\n          onClick={() => setActiveTab('weekly')}\n        >\n          ì£¼ê°„\n        </button>\n      </div>\n\n      {/* ë‚´ ìˆœìœ„ ì¹´ë“œ */}\n      <motion.div \n        className=\"my-rank-card\"\n        initial={{ scale: 0.9, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        transition={{ duration: 0.3 }}\n      >\n        <div className=\"my-rank-info\">\n          <span className=\"my-rank-label\">ë‚´ ìˆœìœ„</span>\n          <span className=\"my-rank-number\" style={{ color: getRankColor(getUserRank()) }}>\n            {getRankEmoji(getUserRank())}\n          </span>\n        </div>\n        <div className=\"my-stats\">\n          <div className=\"stat-item\">\n            <span className=\"stat-label\">ë ˆë²¨</span>\n            <span className=\"stat-value\">{gameStats.level}</span>\n          </div>\n          <div className=\"stat-item\">\n            <span className=\"stat-label\">í¬ì¸íŠ¸</span>\n            <span className=\"stat-value\">{gameStats.totalPoints}</span>\n          </div>\n          <div className=\"stat-item\">\n            <span className=\"stat-label\">ë‹µë³€</span>\n            <span className=\"stat-value\">{gameStats.questionsAnswered}</span>\n          </div>\n        </div>\n      </motion.div>\n\n      {/* ë¦¬ë”ë³´ë“œ ëª©ë¡ */}\n      <div className=\"leaderboard-list\">\n        {isLoading ? (\n          <div className=\"loading\">ë¡œë”© ì¤‘...</div>\n        ) : (\n          getFilteredData().map((item, index) => (\n            <motion.div\n              key={item.id}\n              className={`leaderboard-item ${item.id === user.id ? 'current-user' : ''}`}\n              initial={{ opacity: 0, x: -50 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: index * 0.05 }}\n              whileHover={{ scale: 1.02 }}\n            >\n              <div className=\"rank-section\">\n                <span className=\"rank\" style={{ color: getRankColor(item.rank) }}>\n                  {getRankEmoji(item.rank)}\n                </span>\n              </div>\n              \n              <div className=\"player-info\">\n                <div className=\"player-avatar\">{item.avatar}</div>\n                <div className=\"player-details\">\n                  <div className=\"player-name\">{item.name}</div>\n                  <div className=\"player-department\">{item.department}</div>\n                </div>\n              </div>\n              \n              <div className=\"player-stats\">\n                <div className=\"level-badge\">Lv.{item.level}</div>\n                <div className=\"points\">{item.totalPoints} pts</div>\n              </div>\n            </motion.div>\n          ))\n        )}\n      </div>\n\n      {/* í•˜ë‹¨ í†µê³„ */}\n      <div className=\"leaderboard-footer\">\n        <div className=\"stat-card\">\n          <span className=\"stat-icon\">ğŸ‘¥</span>\n          <span className=\"stat-text\">ì´ {displayData.length}ëª… ì°¸ì—¬</span>\n        </div>\n        <div className=\"stat-card\">\n          <span className=\"stat-icon\">ğŸ“Š</span>\n          <span className=\"stat-text\">í‰ê·  {Math.round(displayData.reduce((acc, cur) => acc + cur.totalPoints, 0) / displayData.length)} pts</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Leaderboard;\n"],"names":["_ref","onBack","user","gameStats","useGameStore","leaderboardData","setLeaderboardData","useState","activeTab","setActiveTab","isLoading","setIsLoading","useEffect","async","id","name","userRef","doc","db","userData","getDoc","studentId","department","avatar","level","experience","coins","totalPoints","questionsAnswered","lastUpdated","Date","toISOString","setDoc","merge","console","log","error","updateUserLeaderboard","unsubscribe","loadLeaderboard","q","query","collection","orderBy","limit","onSnapshot","snapshot","data","docs","map","index","_objectSpread","rank","getUserRank","userIndex","findIndex","item","mockData","displayData","length","getRankEmoji","concat","getRankColor","_jsxs","className","children","_jsx","onClick","motion","div","initial","scale","opacity","animate","transition","duration","style","color","getFilteredData","filter","slice","x","delay","whileHover","Math","round","reduce","acc","cur"],"ignoreList":[],"sourceRoot":""}