{"version":3,"file":"static/js/979.c3d226f4.chunk.js","mappings":"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","sources":["components/QuestionCard.jsx","components/GameHeader.jsx","components/EndScene.jsx","screens/SurveyGame.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./QuestionCard.css\";\r\n\r\nconst QuestionCard = ({\r\n  question,\r\n  questionNumber,\r\n  totalQuestions,\r\n  overallNumber,\r\n  overallTotal,\r\n  chapterNumber,\r\n  chapterName,\r\n  sectionIndex,\r\n  sectionTotal,\r\n  onAnswer,\r\n  onBack,\r\n  onSkip,\r\n  onJump\r\n}) => {\r\n  const [selected, setSelected] = useState(\"\");\r\n\r\n  const { text, type, options, section } = question;\r\n\r\n  // Options ë°°ì—´ë¡œ ë³€í™˜ (ë¬¸ìì—´ì¸ ê²½ìš° ì²˜ë¦¬)\r\n  const getOptionsArray = (opts) => {\r\n    if (!opts) return [];\r\n    if (Array.isArray(opts)) return opts;\r\n    \r\n    if (typeof opts === 'string') {\r\n      // ì‰¼í‘œë¡œ êµ¬ë¶„: \"Regular,Transfer,Exchange\"\r\n      if (opts.includes(',')) {\r\n        return opts.split(',').map(o => o.trim()).filter(Boolean);\r\n      }\r\n      // íŒŒì´í”„ë¡œ êµ¬ë¶„: \"Regular|Transfer|Exchange\"\r\n      if (opts.includes('|')) {\r\n        return opts.split('|').map(o => o.trim()).filter(Boolean);\r\n      }\r\n      // ë‹¨ì¼ ê°’\r\n      return [opts.trim()];\r\n    }\r\n    \r\n    return [];\r\n  };\r\n\r\n  // Likert 5ì  ì²™ë„\r\n  const likert = [\r\n    \"ğŸ˜ Strongly Agree\",\r\n    \"ğŸ™‚ Agree\",\r\n    \"ğŸ˜ Neutral\",\r\n    \"ğŸ˜• Disagree\",\r\n    \"ğŸ˜¡ Strongly Disagree\",\r\n  ];\r\n\r\n  // ì˜µì…˜ ë°°ì—´ (íƒ€ì…ì— ë”°ë¼)\r\n  const answerOptions = type === \"likert\" ? likert : getOptionsArray(options);\r\n\r\n  return (\r\n    <div className=\"question-card fade-in\">\r\n      \r\n      {/* ìƒë‹¨ ì •ë³´ */}\r\n      <div className=\"q-header\">\r\n        <div className=\"chapter-label\">\r\n          <span className=\"chapter-index\">Section {chapterNumber}.</span>\r\n          <span className=\"chapter-name\">{chapterName}</span>\r\n        </div>\r\n\r\n        <div className=\"q-progress-group\">\r\n          <div className=\"q-progress-section\">\r\n            {sectionIndex} / {sectionTotal}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì§ˆë¬¸ í…ìŠ¤íŠ¸ */}\r\n      <h2 className=\"q-text\">{text}</h2>\r\n\r\n      {/* Multi ì˜µì…˜ - ë²ˆí˜¸ ìˆìŒ */}\r\n      {/* ê°ê´€ì‹ ì˜µì…˜ ë Œë”ë§ */}\r\n{(type === \"multi\" || type === \"single\" || type === \"likert\") && answerOptions.length > 0 && (\r\n  <div className=\"q-options\">\r\n    {answerOptions.map((opt, idx) => (\r\n      <button\r\n        key={idx}\r\n        className={`q-option ${selected === opt ? \"selected\" : \"\"}`}\r\n        onClick={() => setSelected(opt)}\r\n      >\r\n        {opt}\r\n      </button>\r\n    ))}\r\n  </div>\r\n)}\r\n\r\n\r\n      {/* Likert ì˜µì…˜ - ë²ˆí˜¸ ì—†ìŒ */}\r\n      {type === \"likert\" && (\r\n        <div className=\"q-options\">\r\n          {answerOptions.map((opt, idx) => (\r\n            <button\r\n              key={idx}\r\n              className={`q-option ${selected === opt ? \"selected\" : \"\"}`}\r\n              onClick={() => setSelected(opt)}\r\n            >\r\n              {opt}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* ì£¼ê´€ì‹ */}\r\n      {type === \"text\" && (\r\n        <textarea\r\n          className=\"q-textarea\"\r\n          placeholder=\"Write your answer...\"\r\n          value={selected}\r\n          onChange={(e) => setSelected(e.target.value)}\r\n        />\r\n      )}\r\n\r\n      {/* ë²„íŠ¼ ì˜ì—­ */}\r\n      <div className=\"q-footer\">\r\n\r\n        {/* Back */}\r\n        <button className=\"back-btn\" onClick={onBack}>\r\n          <span className=\"btn-icon\">â†</span>\r\n          <span className=\"btn-text\">Back</span>\r\n        </button>\r\n\r\n        {/* Skip */}\r\n        <button className=\"skip-btn\" onClick={onSkip}>\r\n          <span className=\"btn-icon\">â­</span>\r\n          <span className=\"btn-text\">Skip</span>\r\n        </button>\r\n\r\n\t<button\r\n  \t  className=\"jump-btn\"\r\n  \t  onClick={onJump}\r\n\t>\r\n  \tâ‡¥ Jump\r\n\t</button>\r\n\r\n        {/* Next */}\r\n        <button\r\n          className={`next-btn ${selected ? \"active\" : \"\"}`}\r\n          disabled={!selected}\r\n          onClick={() => {\r\n            if (!selected) return;\r\n            onAnswer(selected);\r\n            setSelected(\"\");\r\n          }}\r\n        >\r\n          <span className=\"btn-text\">Next</span>\r\n          <span className=\"btn-icon\">â†’</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuestionCard;\r\n","import React from \"react\";\r\nimport useGameStore from \"../store/gameStore\";\r\nimport \"./GameHeader.css\";\r\n\r\nconst GameHeader = ({ overallProgress }) => {\r\n  const { user, gameStats } = useGameStore();\r\n\r\n  return (\r\n    <div className=\"game-header\">\r\n      {/* ì‚¬ìš©ì ì •ë³´ ì„¹ì…˜ */}\r\n      <div className=\"user-info-section\">\r\n        <div className=\"user-avatar\">{user?.avatar || \"ğŸ“\"}</div>\r\n        <div className=\"user-details\">\r\n          <div className=\"user-name\">{user?.name || \"Student\"}</div>\r\n          <div className=\"user-meta\">\r\n            {user?.studentId && <span>ID: {user.studentId}</span>}\r\n            {user?.department && <span className=\"user-dept\">{user.department}</span>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì „ì²´ ì§„í–‰ë¥  */}\r\n      {overallProgress && (\r\n        <div className=\"overall-progress-section\">\r\n          <div className=\"progress-text\">\r\n            Overall Progress: {overallProgress.current} / {overallProgress.total}\r\n          </div>\r\n          <div className=\"progress-bar-container\">\r\n            <div \r\n              className=\"progress-bar-fill\" \r\n              style={{ width: `${(overallProgress.current / overallProgress.total) * 100}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ê²Œì„ ìŠ¤íƒ¯ */}\r\n      <div className=\"stats-row\">\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">â­</div>\r\n          <div className=\"stat-value\">{gameStats?.level || 1}</div>\r\n          <div className=\"stat-label\">Level</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸ’¯</div>\r\n          <div className=\"stat-value\">{gameStats?.experience || 0}</div>\r\n          <div className=\"stat-label\">EXP</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸ”¥</div>\r\n          <div className=\"stat-value\">{gameStats?.streak || 0}</div>\r\n          <div className=\"stat-label\">Streak</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸª™</div>\r\n          <div className=\"stat-value\">{gameStats?.coins || 0}</div>\r\n          <div className=\"stat-label\">Coins</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameHeader;\r\n","import React from \"react\";\r\nimport \"./EndScene.css\";\r\n\r\nexport default function EndScene({ onComplete }) {\r\n  return (\r\n    <div className=\"end-scene\">\r\n      <h1>ğŸ‰ Great Job!</h1>\r\n      <p>Your survey game mission has been successfully completed!!.</p>\r\n\r\n      <button\r\n        className=\"end-btn\"\r\n        onClick={onComplete}\r\n      >\r\n        ë¦¬ë”ë³´ë“œ ë³´ê¸° â†’\r\n      </button>\r\n\r\n      <button\r\n        className=\"home-btn\"\r\n        onClick={() => window.location.reload()}\r\n      >\r\n        ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { collection, getDocs, orderBy, query } from \"firebase/firestore\";\r\nimport { db } from \"../firebase/config\";\r\nimport useGameStore from \"../store/gameStore\";\r\nimport QuestionCard from \"../components/QuestionCard\";\r\nimport GameHeader from \"../components/GameHeader\";\r\nimport EndScene from \"../components/EndScene\";\r\nimport toast from \"react-hot-toast\";\r\nimport \"./SurveyGame.css\";\r\n\r\n/* ì˜µì…˜ ë¬¸ìì—´ ì²˜ë¦¬ */\r\nconst getOptionsArray = (options) => {\r\n  if (!options) return [];\r\n  if (Array.isArray(options)) return options;\r\n\r\n  return options\r\n    .split(/[\\|,]/)\r\n    .map((o) => o.trim())\r\n    .filter((o) => o.length > 0);\r\n};\r\n\r\nconst SurveyGame = ({ onComplete }) => {\r\n  const { user, answerQuestion } = useGameStore();\r\n\r\n  const [questions, setQuestions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [currentCategory, setCurrentCategory] = useState(\"\");\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [answers, setAnswers] = useState({});\r\n  const [startTime, setStartTime] = useState(Date.now());\r\n  const [isFinished, setIsFinished] = useState(false);\r\n\r\n  const lang = user?.language || \"en\";\r\n\r\n  /* Firestore ì§ˆë¬¸ ë¡œë”© */\r\n  useEffect(() => {\r\n    const loadQuestions = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        const q = query(collection(db, \"questions\"), orderBy(\"id\"));\r\n        const snap = await getDocs(q);\r\n\r\n        const list = snap.docs.map((doc) => ({\r\n          docId: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n\r\n        setQuestions(list);\r\n\r\n        if (list.length > 0) {\r\n          setCurrentCategory(list[0].category);\r\n        }\r\n      } catch (err) {\r\n        toast.error(\"Failed to load questions\");\r\n      } finally {\r\n        setLoading(false);\r\n        setStartTime(Date.now());\r\n      }\r\n    };\r\n\r\n    loadQuestions();\r\n  }, []);\r\n\r\n  /* ì¹´í…Œê³ ë¦¬ ëª©ë¡ */\r\n  const categories = useMemo(\r\n    () => [...new Set(questions.map((q) => q.category))],\r\n    [questions]\r\n  );\r\n\r\n  /* í˜„ì¬ ì¹´í…Œê³ ë¦¬ ì§ˆë¬¸ */\r\n  const filteredQuestions = useMemo(\r\n    () => questions.filter((q) => q.category === currentCategory),\r\n    [questions, currentCategory]\r\n  );\r\n\r\n  const currentQuestion =\r\n    filteredQuestions.length > 0 ? filteredQuestions[currentIndex] : null;\r\n\r\n  /* ì „ì²´ ì§„í–‰ë¥  */\r\n  const overallProgress = useMemo(() => {\r\n    const answeredCount = Object.keys(answers).length;\r\n    return { current: answeredCount, total: questions.length };\r\n  }, [answers, questions.length]);\r\n\r\n  const getCurrentOverallNumber = () => {\r\n    if (!currentQuestion) return 0;\r\n    return questions.findIndex((q) => q.docId === currentQuestion.docId) + 1;\r\n  };\r\n  \r\n  \r\n  /* ì—¬ëŸ¬ì¹¸ ë™ì‹œ ìŠ¤í‚µê¸°ëŠ¥ */\r\n  const handleJumpToLast = () => {\r\n  if (!currentQuestion) return;\r\n\r\n  const qId = currentQuestion.docId;\r\n\r\n  // 1) í˜„ì¬ ì§ˆë¬¸ skip ì²˜ë¦¬\r\n  setAnswers(prev => ({\r\n    ...prev,\r\n    [qId]: { value: null, skipped: true }\r\n  }));\r\n\r\n  // 2) ì„¹ì…˜ì˜ ë‚˜ë¨¸ì§€ ì§ˆë¬¸ ëª¨ë‘ skip ì²˜ë¦¬\r\n  const newAnswers = { ...answers, [qId]: { value: null, skipped: true } };\r\n\r\n  for (let i = currentIndex + 1; i < filteredQuestions.length; i++) {\r\n    const nextQId = filteredQuestions[i].docId;\r\n    newAnswers[nextQId] = { value: null, skipped: true };\r\n  }\r\n\r\n  // ìµœì¢… answers ì—…ë°ì´íŠ¸\r\n  setAnswers(newAnswers);\r\n\r\n  // 3) ì„¹ì…˜ ë§ˆì§€ë§‰ ì§ˆë¬¸ìœ¼ë¡œ ì´ë™\r\n  const lastIndex = filteredQuestions.length - 1;\r\n  setCurrentIndex(lastIndex);\r\n  setStartTime(Date.now());\r\n};\r\n\r\n\r\n  /* â¬… ë¬¸ì œ í•´ê²°: ê³„ì‚°ì„ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ìœ„ì¹˜ */\r\n  const sectionTotal = filteredQuestions.length;\r\n  const sectionIndex = currentIndex + 1;\r\n  const chapterNumber = categories.indexOf(currentCategory) + 1;\r\n\r\n  /* Back ë²„íŠ¼ */\r\n  const handleBack = () => {\r\n    if (currentIndex > 0) {\r\n      setCurrentIndex((prev) => prev - 1);\r\n      return;\r\n    }\r\n\r\n    const currentCatIndex = categories.indexOf(currentCategory);\r\n    if (currentCatIndex > 0) {\r\n      const prevCategory = categories[currentCatIndex - 1];\r\n      const prevQuestions = questions.filter((q) => q.category === prevCategory);\r\n\r\n      setCurrentCategory(prevCategory);\r\n      setCurrentIndex(prevQuestions.length - 1);\r\n    }\r\n  };\r\n\r\n  /* ë‹µë³€ ì²˜ë¦¬ */\r\n  const handleAnswer = (value) => {\r\n    if (!currentQuestion) return;\r\n\r\n    const now = Date.now();\r\n    const timeSpent = (now - startTime) / 1000;\r\n    const qId = currentQuestion.docId;\r\n\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [qId]: { value, timeSpent },\r\n    }));\r\n\r\n    answerQuestion(timeSpent, \"good\");\r\n\r\n    const nextIndex = currentIndex + 1;\r\n\r\n    if (nextIndex < filteredQuestions.length) {\r\n      setCurrentIndex(nextIndex);\r\n      setStartTime(Date.now());\r\n      return;\r\n    }\r\n\r\n    const answeredIds = new Set(Object.keys({ ...answers, [qId]: true }));\r\n\r\n    const remainingCats = categories.filter((cat) =>\r\n      questions.some(\r\n        (q) => q.category === cat && !answeredIds.has(q.docId)\r\n      )\r\n    );\r\n\r\n    if (remainingCats.length > 0) {\r\n      setCurrentCategory(remainingCats[0]);\r\n      setCurrentIndex(0);\r\n      setStartTime(Date.now());\r\n      return;\r\n    }\r\n\r\n    setIsFinished(true);\r\n  };\r\n\r\n  const handleSkip = () => {\r\n  const qId = currentQuestion.docId;\r\n\r\n  // â­ Skipí•œ ì§ˆë¬¸ë„ 'ë‹µí–ˆë‹¤'ê³  ì²˜ë¦¬ (ì •ë‹µì€ null)\r\n  setAnswers(prev => ({\r\n    ...prev,\r\n    [qId]: { value: null, skipped: true }\r\n  }));\r\n\r\n  const nextIndex = currentIndex + 1;\r\n\r\n  // ì„¹ì…˜ ë‚´ ë‹¤ìŒ ì§ˆë¬¸ìœ¼ë¡œ ì´ë™\r\n  if (nextIndex < filteredQuestions.length) {\r\n    setCurrentIndex(nextIndex);\r\n    setStartTime(Date.now());\r\n    return;\r\n  }\r\n\r\n  // â­ Skip í¬í•¨í•˜ì—¬ ë‹µí•œ ì§ˆë¬¸ ID ëª©ë¡ ì¬ìƒì„±\r\n  const answeredIds = new Set(Object.keys({ ...answers, [qId]: true }));\r\n\r\n  // ë‚¨ì€ ì„¹ì…˜ ê²€ìƒ‰\r\n  const remainingCats = categories.filter(cat =>\r\n    questions.some(q => q.category === cat && !answeredIds.has(q.docId))\r\n  );\r\n\r\n  // ë‹¤ìŒ ì„¹ì…˜ìœ¼ë¡œ ì´ë™\r\n  if (remainingCats.length > 0) {\r\n    setCurrentCategory(remainingCats[0]);\r\n    setCurrentIndex(0);\r\n    setStartTime(Date.now());\r\n    return;\r\n  }\r\n\r\n  // ì „ì²´ ì™„ì£¼\r\n  setIsFinished(true);\r\n};\r\n\r\n\r\n  /* ì¢…ë£Œ í™”ë©´ */\r\n  if (isFinished) return <EndScene onComplete={onComplete} />;\r\n\r\n  if (loading) return <div className=\"loading\">Loadingâ€¦</div>;\r\n  if (!currentQuestion) return <div>No questions available</div>;\r\n\r\n  /* QuestionCardë¡œ ì „ë‹¬í•˜ëŠ” ë°ì´í„° */\r\n  const formatted = {\r\n    text: currentQuestion.text?.[lang] || currentQuestion.text?.en,\r\n    section: currentCategory,\r\n    type: currentQuestion.type,\r\n    options: getOptionsArray(currentQuestion.options),\r\n    required: true,\r\n  };\r\n\r\n  return (\r\n    <div className=\"survey-container\">\r\n      <GameHeader overallProgress={overallProgress} />\r\n\r\n      <QuestionCard\r\n        key={currentQuestion.docId}\r\n        question={formatted}\r\n        chapterNumber={chapterNumber}\r\n        chapterName={currentCategory}\r\n        sectionIndex={sectionIndex}\r\n        sectionTotal={sectionTotal}\r\n        onBack={handleBack}\r\n        onAnswer={handleAnswer}\r\n\tonSkip={handleSkip}\r\n\tonJump={handleJumpToLast}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SurveyGame;\r\n"],"names":["_ref","question","questionNumber","totalQuestions","overallNumber","overallTotal","chapterNumber","chapterName","sectionIndex","sectionTotal","onAnswer","onBack","onSkip","onJump","selected","setSelected","useState","text","type","options","section","answerOptions","opts","Array","isArray","includes","split","map","o","trim","filter","Boolean","_jsxs","className","children","_jsx","length","opt","idx","concat","onClick","placeholder","value","onChange","e","target","disabled","overallProgress","user","gameStats","useGameStore","avatar","name","studentId","department","current","total","style","width","level","experience","streak","coins","EndScene","onComplete","window","location","reload","_currentQuestion$text","_currentQuestion$text2","answerQuestion","questions","setQuestions","loading","setLoading","currentCategory","setCurrentCategory","currentIndex","setCurrentIndex","answers","setAnswers","startTime","setStartTime","Date","now","isFinished","setIsFinished","lang","language","useEffect","async","q","query","collection","db","orderBy","list","getDocs","docs","doc","_objectSpread","docId","id","data","category","err","toast","error","loadQuestions","categories","useMemo","Set","filteredQuestions","currentQuestion","Object","keys","indexOf","formatted","en","required","GameHeader","QuestionCard","handleBack","prev","currentCatIndex","prevCategory","prevQuestions","timeSpent","qId","nextIndex","answeredIds","remainingCats","cat","some","has","handleSkip","skipped","handleJumpToLast","newAnswers","i","lastIndex"],"ignoreList":[],"sourceRoot":""}