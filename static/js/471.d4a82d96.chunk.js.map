{"version":3,"file":"static/js/471.d4a82d96.chunk.js","mappings":"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","sources":["components/QuestionCard.jsx","components/GameHeader.jsx","screens/SurveyGame.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./QuestionCard.css\";\r\n\r\nconst QuestionCard = ({\r\n  question,\r\n  questionNumber,\r\n  totalQuestions,\r\n  overallNumber,\r\n  overallTotal,\r\n  onAnswer,\r\n  onSkip,\r\n  onBack,\r\n  onJump,\r\n}) => {\r\n  const [selected, setSelected] = useState(\"\");\r\n\r\n  const { text, type, options, section } = question;\r\n\r\n  // Likert 5ì  ì²™ë„\r\n  const likert = [\r\n    \"ğŸ˜ Strongly Agree\",\r\n    \"ğŸ™‚ Agree\",\r\n    \"ğŸ˜ Neutral\",\r\n    \"ğŸ˜• Disagree\",\r\n    \"ğŸ˜¡ Strongly Disagree\",\r\n  ];\r\n\r\n  // ì˜µì…˜ ë³€í™˜ (ë¬¸ìì—´/ë°°ì—´ ëª¨ë‘ ì§€ì›)\r\n  const getOptionsArray = (options) => {\r\n    if (!options) return [];\r\n    if (Array.isArray(options)) return options;\r\n\r\n    return options\r\n      .split(/[\\|,]/g)\r\n      .map((o) => o.trim())\r\n      .filter((o) => o.length > 0);\r\n  };\r\n\r\n  const answerOptions = type === \"likert\" ? likert : getOptionsArray(options);\r\n\r\n  return (\r\n    <div className=\"question-card fade-in\">\r\n      {/* ìƒë‹¨ ì •ë³´ ì˜ì—­ */}\r\n      <div className=\"q-header\">\r\n        <div className=\"q-section\">Section {section}</div>\r\n        <div className=\"q-progress-group\">\r\n          <div className=\"q-progress-chapter\">\r\n            {questionNumber} / {totalQuestions}\r\n          </div>\r\n          <div className=\"q-progress-overall\">\r\n            Overall: {overallNumber} / {overallTotal}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì§ˆë¬¸ í…ìŠ¤íŠ¸ */}\r\n      <h2 className=\"q-text\">{text}</h2>\r\n\r\n      {/* ê°ê´€ì‹ ì˜µì…˜ (LIKERT / MULTI / SINGLE ëª¨ë‘ ì—¬ê¸°ì—ì„œë§Œ ë Œë”ë§ë¨ â†’ ì¤‘ë³µ ì œê±° ì™„ë£Œ!) */}\r\n      {(type === \"multi\" || type === \"single\" || type === \"likert\") &&\r\n        answerOptions.length > 0 && (\r\n          <div className=\"q-options\">\r\n            {answerOptions.map((opt, idx) => (\r\n              <button\r\n                key={idx}\r\n                className={`q-option ${selected === opt ? \"selected\" : \"\"}`}\r\n                onClick={() => setSelected(opt)}\r\n              >\r\n                {opt}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n      {/* ì£¼ê´€ì‹ í…ìŠ¤íŠ¸ íƒ€ì… */}\r\n      {type === \"text\" && (\r\n        <textarea\r\n          className=\"q-textarea\"\r\n          placeholder=\"Write your answer...\"\r\n          value={selected}\r\n          onChange={(e) => setSelected(e.target.value)}\r\n        />\r\n      )}\r\n\r\n      {/* ë²„íŠ¼ ì˜ì—­ */}\r\n      <div className=\"q-footer\">\r\n\r\n        {/* Back */}\r\n        <button className=\"back-btn\" onClick={onBack}>\r\n          â† Back\r\n        </button>\r\n\r\n        {/* Skip */}\r\n        <button className=\"skip-btn\" onClick={() => onSkip()}>\r\n          â­ Skip\r\n        </button>\r\n\r\n        {/* Jump */}\r\n        <button className=\"jump-btn\" onClick={() => onJump()}>\r\n          âŸ Jump\r\n        </button>\r\n\r\n        {/* Next */}\r\n        <button\r\n          className={`next-btn ${selected ? \"active\" : \"\"}`}\r\n          disabled={!selected}\r\n          onClick={() => {\r\n            if (!selected) return;\r\n            onAnswer(selected);\r\n            setSelected(\"\");\r\n          }}\r\n        >\r\n          Next â†’\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuestionCard;\r\n","import React from \"react\";\r\nimport useGameStore from \"../store/gameStore\";\r\nimport \"./GameHeader.css\";\r\n\r\nconst GameHeader = ({ overallProgress }) => {\r\n  const { user, gameStats } = useGameStore();\r\n\r\n  return (\r\n    <div className=\"game-header\">\r\n      {/* ì‚¬ìš©ì ì •ë³´ ì„¹ì…˜ */}\r\n      <div className=\"user-info-section\">\r\n        <div className=\"user-avatar\">{user?.avatar || \"ğŸ“\"}</div>\r\n        <div className=\"user-details\">\r\n          <div className=\"user-name\">{user?.name || \"Student\"}</div>\r\n          <div className=\"user-meta\">\r\n            {user?.studentId && <span>ID: {user.studentId}</span>}\r\n            {user?.department && <span className=\"user-dept\">{user.department}</span>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì „ì²´ ì§„í–‰ë¥  */}\r\n      {overallProgress && (\r\n        <div className=\"overall-progress-section\">\r\n          <div className=\"progress-text\">\r\n            Overall Progress: {overallProgress.current} / {overallProgress.total}\r\n          </div>\r\n          <div className=\"progress-bar-container\">\r\n            <div \r\n              className=\"progress-bar-fill\" \r\n              style={{ width: `${(overallProgress.current / overallProgress.total) * 100}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ê²Œì„ ìŠ¤íƒ¯ */}\r\n      <div className=\"stats-row\">\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">â­</div>\r\n          <div className=\"stat-value\">{gameStats?.level || 1}</div>\r\n          <div className=\"stat-label\">Level</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸ’¯</div>\r\n          <div className=\"stat-value\">{gameStats?.experience || 0}</div>\r\n          <div className=\"stat-label\">EXP</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸ”¥</div>\r\n          <div className=\"stat-value\">{gameStats?.streak || 0}</div>\r\n          <div className=\"stat-label\">Streak</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸª™</div>\r\n          <div className=\"stat-value\">{gameStats?.coins || 0}</div>\r\n          <div className=\"stat-label\">Coins</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameHeader;\r\n","import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { collection, getDocs, orderBy, query } from \"firebase/firestore\";\r\nimport { db } from \"../firebase/config\";\r\nimport useGameStore from \"../store/gameStore\";\r\nimport QuestionCard from \"../components/QuestionCard\";\r\nimport GameHeader from \"../components/GameHeader\";\r\nimport toast from \"react-hot-toast\";\r\nimport \"./SurveyGame.css\";\r\n\r\n/** ì˜µì…˜ ë¬¸ìì—´ â†’ ë°°ì—´ ë³€í™˜ */\r\nconst getOptionsArray = (options) => {\r\n  if (!options) return [];\r\n  if (Array.isArray(options)) return options;\r\n  return options\r\n    .split(/[\\|,]/g)\r\n    .map((o) => o.trim())\r\n    .filter((o) => o.length > 0);\r\n};\r\n\r\nexport default function SurveyGame({ onComplete }) {\r\n  const { user, answerQuestion } = useGameStore();\r\n\r\n  const [questions, setQuestions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [currentCategory, setCurrentCategory] = useState(\"\");\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n\r\n  const [answers, setAnswers] = useState({});\r\n  const [startTime, setStartTime] = useState(Date.now());\r\n\r\n  const lang = user?.language || \"en\";\r\n\r\n  /** ---------------------------\r\n   * Firestore ì§ˆë¬¸ ë¡œë”©\r\n   ----------------------------*/\r\n  useEffect(() => {\r\n    const loadQuestions = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        const q = query(collection(db, \"questions\"), orderBy(\"id\"));\r\n        const snap = await getDocs(q);\r\n\r\n        const list = snap.docs.map((doc) => ({\r\n          docId: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n\r\n        setQuestions(list);\r\n\r\n        if (list.length > 0) {\r\n          setCurrentCategory(list[0].category);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"âŒ Failed to load questions:\", err);\r\n        toast.error(\"Failed to load questions\");\r\n      } finally {\r\n        setLoading(false);\r\n        setStartTime(Date.now());\r\n      }\r\n    };\r\n\r\n    loadQuestions();\r\n  }, []);\r\n\r\n  /** ---------------------------\r\n   * ì¹´í…Œê³ ë¦¬ ëª©ë¡\r\n   ----------------------------*/\r\n  const categories = useMemo(\r\n    () => [...new Set(questions.map((q) => q.category))],\r\n    [questions]\r\n  );\r\n\r\n  /** ---------------------------\r\n   * í˜„ì¬ ì¹´í…Œê³ ë¦¬ ì§ˆë¬¸ ëª©ë¡\r\n   ----------------------------*/\r\n  const filteredQuestions = useMemo(() => {\r\n    return questions.filter((q) => q.category === currentCategory);\r\n  }, [questions, currentCategory]);\r\n\r\n  const currentQuestion =\r\n    filteredQuestions.length > 0 ? filteredQuestions[currentIndex] : null;\r\n\r\n  /** ---------------------------\r\n   * ì „ì²´ ì§„í–‰ë¥  ê³„ì‚°\r\n   ----------------------------*/\r\n  const overallProgress = {\r\n    current: Object.keys(answers).length,\r\n    total: questions.length,\r\n  };\r\n\r\n  const getCurrentOverallNumber = () => {\r\n    if (!currentQuestion) return 0;\r\n    return questions.findIndex((q) => q.docId === currentQuestion.docId) + 1;\r\n  };\r\n\r\n  /** ---------------------------\r\n   * ë‹µë³€ ì²˜ë¦¬\r\n   ----------------------------*/\r\n  const goToNext = () => {\r\n    const nextIndex = currentIndex + 1;\r\n\r\n    /** í˜„ì¬ ì¹´í…Œê³ ë¦¬ ì•ˆì—ì„œ ë‹¤ìŒ ì§ˆë¬¸ì´ ìˆëŠ” ê²½ìš° */\r\n    if (nextIndex < filteredQuestions.length) {\r\n      setCurrentIndex(nextIndex);\r\n      setStartTime(Date.now());\r\n      return;\r\n    }\r\n\r\n    /** ---------------------------\r\n     * í˜„ì¬ ì¹´í…Œê³ ë¦¬ ì™„ë£Œ\r\n     ----------------------------*/\r\n    toast.success(`ğŸ‰ ${currentCategory} Completed!`);\r\n\r\n    const answeredIds = new Set(Object.keys(answers));\r\n\r\n    // â­ ë‹¤ìŒ ì¹´í…Œê³ ë¦¬ ì„ ì • (ì˜¤ë¥˜ì˜ í•µì‹¬ ë¶€ë¶„ ì•ˆì •í™”)\r\n    const remainingCats = categories.filter((cat) =>\r\n      questions.some(\r\n        (q) => q.category === cat && !answeredIds.has(q.docId)\r\n      )\r\n    );\r\n\r\n    if (remainingCats.length > 0) {\r\n      setCurrentCategory(remainingCats[0]);\r\n      setCurrentIndex(0);\r\n      setStartTime(Date.now());\r\n      return;\r\n    }\r\n\r\n    /** ì „ì²´ ì™„ë£Œ */\r\n    toast.success(\"ğŸ¯ All survey completed!\");\r\n    if (onComplete) onComplete();\r\n  };\r\n\r\n  /** ---------------------------\r\n   * Next ë²„íŠ¼\r\n   ----------------------------*/\r\n  const handleAnswer = (value) => {\r\n    if (!currentQuestion) return;\r\n\r\n    const timeSpent = (Date.now() - startTime) / 1000;\r\n    const qId = currentQuestion.docId;\r\n\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [qId]: { value, timeSpent },\r\n    }));\r\n\r\n    answerQuestion(timeSpent, \"good\");\r\n\r\n    goToNext();\r\n  };\r\n\r\n  /** ---------------------------\r\n   * Skip (ë¬¸í•­ë§Œ ë„˜ì–´ê°)\r\n   ----------------------------*/\r\n  const handleSkip = () => {\r\n    if (!currentQuestion) return;\r\n\r\n    const qId = currentQuestion.docId;\r\n\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [qId]: { value: null, skip: true },\r\n    }));\r\n\r\n    goToNext();\r\n  };\r\n\r\n  /** ---------------------------\r\n   * Back (ë‹¨ìˆœ ì´ì „ ë¬¸í•­)\r\n   ----------------------------*/\r\n  const handleBack = () => {\r\n    if (currentIndex > 0) {\r\n      setCurrentIndex(currentIndex - 1);\r\n      return;\r\n    }\r\n\r\n    toast(\"âŒ ì²« ë²ˆì§¸ ë¬¸í•­ì…ë‹ˆë‹¤.\");\r\n  };\r\n\r\n  /** ---------------------------\r\n   * Jump (í˜„ì¬ ì„¹ì…˜ì˜ ë§ˆì§€ë§‰ ë¬¸í•­ìœ¼ë¡œ ë°”ë¡œ ì´ë™)\r\n   ----------------------------*/\r\n  const handleJump = () => {\r\n    const qId = currentQuestion.docId;\r\n\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [qId]: { value: null, jump: true },\r\n    }));\r\n\r\n    setCurrentIndex(filteredQuestions.length - 1);\r\n  };\r\n\r\n  /** --------------------------- */\r\n  if (loading || !currentQuestion) {\r\n    return (\r\n      <div className=\"survey-container\">\r\n        <div className=\"loading-screen\">Loading questions...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const formatted = {\r\n    text: currentQuestion.text?.[lang] || currentQuestion.text?.en,\r\n    section: currentQuestion.category,\r\n    type: currentQuestion.type,\r\n    options: getOptionsArray(currentQuestion.options),\r\n  };\r\n\r\n  return (\r\n    <div className=\"survey-container\">\r\n      <GameHeader overallProgress={overallProgress} />\r\n\r\n      <QuestionCard\r\n        question={formatted}\r\n        questionNumber={currentIndex + 1}\r\n        totalQuestions={filteredQuestions.length}\r\n        overallNumber={getCurrentOverallNumber()}\r\n        overallTotal={questions.length}\r\n        onAnswer={handleAnswer}\r\n        onSkip={handleSkip}\r\n        onBack={handleBack}\r\n        onJump={handleJump}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":["_ref","question","questionNumber","totalQuestions","overallNumber","overallTotal","onAnswer","onSkip","onBack","onJump","selected","setSelected","useState","text","type","options","section","answerOptions","Array","isArray","split","map","o","trim","filter","length","getOptionsArray","_jsxs","className","children","_jsx","opt","idx","concat","onClick","placeholder","value","onChange","e","target","disabled","overallProgress","user","gameStats","useGameStore","avatar","name","studentId","department","current","total","style","width","level","experience","streak","coins","SurveyGame","_currentQuestion$text","_currentQuestion$text2","onComplete","answerQuestion","questions","setQuestions","loading","setLoading","currentCategory","setCurrentCategory","currentIndex","setCurrentIndex","answers","setAnswers","startTime","setStartTime","Date","now","lang","language","useEffect","async","q","query","collection","db","orderBy","list","getDocs","docs","doc","_objectSpread","docId","id","data","category","err","console","error","toast","loadQuestions","categories","useMemo","Set","filteredQuestions","currentQuestion","Object","keys","goToNext","nextIndex","success","answeredIds","remainingCats","cat","some","has","formatted","en","GameHeader","QuestionCard","findIndex","timeSpent","qId","prev","handleSkip","skip","handleBack","handleJump","jump"],"ignoreList":[],"sourceRoot":""}