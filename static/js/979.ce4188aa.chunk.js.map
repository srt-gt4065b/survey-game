{"version":3,"file":"static/js/979.ce4188aa.chunk.js","mappings":"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","sources":["components/QuestionCard.jsx","components/GameHeader.jsx","components/EndScene.jsx","screens/SurveyGame.jsx"],"sourcesContent":["import React from \"react\";\r\nimport \"./QuestionCard.css\";\r\n\r\nconst QuestionCard = ({\r\n  question,\r\n  questionNumber,\r\n  totalQuestions,\r\n  chapterNumber,\r\n  chapterName,\r\n  onAnswer,\r\n  onBack,\r\n  onSkip,\r\n  onJump,\r\n}) => {\r\n  /** ì˜µì…˜ ë°°ì—´ ì•ˆì „ ì²˜ë¦¬ */\r\n  const optionList = Array.isArray(question.options)\r\n    ? question.options\r\n    : typeof question.options === \"string\"\r\n    ? question.options.split(\"|\").map((o) => o.trim())\r\n    : [];\r\n\r\n  return (\r\n    <div className=\"question-card\">\r\n\r\n      {/* ğŸ”¹ Section Header */}\r\n      <div className=\"qc-section-header\">\r\n        <div className=\"qc-section-left\">\r\n          <span className=\"qc-section-number\">Section {chapterNumber}.</span>\r\n          <span className=\"qc-section-name\">{chapterName}</span>\r\n        </div>\r\n\r\n        <div className=\"qc-section-progress\">\r\n          {questionNumber} / {totalQuestions}\r\n        </div>\r\n      </div>\r\n\r\n      {/* ğŸ”¹ Question Text */}\r\n      <h2 className=\"qc-question-text\">{question.text}</h2>\r\n\r\n      {/* ğŸ”¹ TEXT TYPE */}\r\n      {question.type === \"text\" && (\r\n        <textarea\r\n          className=\"qc-textarea\"\r\n          placeholder=\"Write your answer...\"\r\n          onChange={(e) => (question.temp = e.target.value)}\r\n        />\r\n      )}\r\n\r\n      {/* ğŸ”¹ MULTI / LIKERT OPTIONS */}\r\n      {(question.type === \"multi\" || question.type === \"likert\") && (\r\n        <div className=\"qc-options-wrapper\">\r\n          {optionList.map((opt, idx) => (\r\n            <button\r\n              key={idx}\r\n              className=\"qc-option-btn\"\r\n              onClick={() => onAnswer(opt)}\r\n            >\r\n              {opt}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* ğŸ”¹ Buttons Row */}\r\n      <div className=\"qc-button-row\">\r\n\r\n        <button className=\"qc-btn back\" onClick={onBack}>\r\n          â† Back\r\n        </button>\r\n\r\n        <button className=\"qc-btn skip\" onClick={onSkip}>\r\n          â© Skip\r\n        </button>\r\n\r\n        <button className=\"qc-btn jump\" onClick={onJump}>\r\n          âŸ Jump\r\n        </button>\r\n\r\n        <button\r\n          className=\"qc-btn next\"\r\n          disabled={question.type !== \"text\"}\r\n          onClick={() => onAnswer(question.temp || \"\")}\r\n        >\r\n          Next â†’\r\n        </button>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuestionCard;\r\n","import React from \"react\";\r\nimport useGameStore from \"../store/gameStore\";\r\nimport \"./GameHeader.css\";\r\n\r\nconst GameHeader = ({ overallProgress }) => {\r\n  const { user, gameStats } = useGameStore();\r\n\r\n  return (\r\n    <div className=\"game-header\">\r\n      {/* ì‚¬ìš©ì ì •ë³´ ì„¹ì…˜ */}\r\n      <div className=\"user-info-section\">\r\n        <div className=\"user-avatar\">{user?.avatar || \"ğŸ“\"}</div>\r\n        <div className=\"user-details\">\r\n          <div className=\"user-name\">{user?.name || \"Student\"}</div>\r\n          <div className=\"user-meta\">\r\n            {user?.studentId && <span>ID: {user.studentId}</span>}\r\n            {user?.department && <span className=\"user-dept\">{user.department}</span>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì „ì²´ ì§„í–‰ë¥  */}\r\n      {overallProgress && (\r\n        <div className=\"overall-progress-section\">\r\n          <div className=\"progress-text\">\r\n            Overall Progress: {overallProgress.current} / {overallProgress.total}\r\n          </div>\r\n          <div className=\"progress-bar-container\">\r\n            <div \r\n              className=\"progress-bar-fill\" \r\n              style={{ width: `${(overallProgress.current / overallProgress.total) * 100}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ê²Œì„ ìŠ¤íƒ¯ */}\r\n      <div className=\"stats-row\">\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">â­</div>\r\n          <div className=\"stat-value\">{gameStats?.level || 1}</div>\r\n          <div className=\"stat-label\">Level</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸ’¯</div>\r\n          <div className=\"stat-value\">{gameStats?.experience || 0}</div>\r\n          <div className=\"stat-label\">EXP</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸ”¥</div>\r\n          <div className=\"stat-value\">{gameStats?.streak || 0}</div>\r\n          <div className=\"stat-label\">Streak</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸª™</div>\r\n          <div className=\"stat-value\">{gameStats?.coins || 0}</div>\r\n          <div className=\"stat-label\">Coins</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameHeader;\r\n","import React from \"react\";\r\nimport \"./EndScene.css\";\r\n\r\nexport default function EndScene({ onComplete }) {\r\n  return (\r\n    <div className=\"end-scene\">\r\n      <h1>ğŸ‰ Great Job!</h1>\r\n      <p>Your survey game mission has been successfully completed!!.</p>\r\n\r\n      <button\r\n        className=\"end-btn\"\r\n        onClick={onComplete}\r\n      >\r\n        ë¦¬ë”ë³´ë“œ ë³´ê¸° â†’\r\n      </button>\r\n\r\n      <button\r\n        className=\"home-btn\"\r\n        onClick={() => window.location.reload()}\r\n      >\r\n        ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","// src/screens/SurveyGame.jsx  (ë˜ëŠ” í˜„ì¬ ìœ„ì¹˜ì— ë§ê²Œ)\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { collection, getDocs } from \"firebase/firestore\";\r\nimport { db } from \"../firebase/config\";\r\nimport useGameStore from \"../store/gameStore\";\r\nimport QuestionCard from \"../components/QuestionCard\";\r\nimport GameHeader from \"../components/GameHeader\";\r\nimport EndScene from \"../components/EndScene\";\r\nimport toast from \"react-hot-toast\";\r\nimport \"./SurveyGame.css\";\r\n\r\n/**\r\n * âœ… ì„¤ë¬¸ ì„¹ì…˜ ì§„í–‰ ìˆœì„œ (êµìˆ˜ë‹˜ì´ ì£¼ì‹  ìˆœì„œ ê·¸ëŒ€ë¡œ)\r\n */\r\nconst SECTION_ORDER = [\r\n  \"Personal Background\",\r\n  \"Orientation Week Team Building\",\r\n  \"Admissions\",\r\n  \"Faculty\",\r\n  \"Education and Curriculum\",\r\n  \"Academic Advisor\",\r\n  \"Academic Affairs\",\r\n  \"Study Abroad\",\r\n  \"Student Services\",\r\n  \"Residence\",\r\n  \"Facilities\",\r\n  \"IT Resources: SAIS, SMART, E-Mail & Attendance App\",\r\n  \"Library\",\r\n  \"Meals\",\r\n  \"Counseling Services\",\r\n  \"Student Belongingness\",\r\n  \"Extra-curricular Activities\",\r\n  \"Employment in Korea\",\r\n  \"Frequency Mode\",\r\n  \"At a Glance\",\r\n];\r\n\r\n/**\r\n * id: \"Q171\" ì²˜ëŸ¼ ë¬¸ìì—´ì¼ ë•Œ ìˆ«ì ë¶€ë¶„ë§Œ êº¼ë‚´ì„œ ì •ë ¬ì— ì‚¬ìš©\r\n */\r\nconst getNumericId = (id) => {\r\n  if (!id) return Number.MAX_SAFE_INTEGER;\r\n  const match = String(id).match(/\\d+/);\r\n  return match ? Number(match[0]) : Number.MAX_SAFE_INTEGER;\r\n};\r\n\r\n/**\r\n * ì˜µì…˜ ë¬¸ìì—´ â†’ ë°°ì—´ ë³€í™˜\r\n *  - \"A|B|C\" ë˜ëŠ” \"A,B,C\" ëª¨ë‘ ëŒ€ì‘\r\n */\r\nconst getOptionsArray = (options) => {\r\n  if (!options) return [];\r\n  if (Array.isArray(options)) return options;\r\n\r\n  return String(options)\r\n    .split(/[\\|,]/g)\r\n    .map((o) => o.trim())\r\n    .filter((o) => o.length > 0);\r\n};\r\n\r\nconst SurveyGame = ({ onComplete }) => {\r\n  const { user, answerQuestion } = useGameStore();\r\n\r\n  const [sections, setSections] = useState([]); // [{ name, questions: [...] }]\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [currentSectionIndex, setCurrentSectionIndex] = useState(0);\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n\r\n  const [answers, setAnswers] = useState({}); // { docId: { value, skipped, timeSpent } }\r\n  const [startTime, setStartTime] = useState(Date.now());\r\n  const [finished, setFinished] = useState(false);\r\n\r\n  const lang = user?.language || \"en\";\r\n\r\n  // --------------------------------\r\n  // ğŸ”„ Firestoreì—ì„œ ì§ˆë¬¸ ë¡œë”©\r\n  // --------------------------------\r\n  useEffect(() => {\r\n    const loadQuestions = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        const snap = await getDocs(collection(db, \"questions\"));\r\n        let list = snap.docs.map((doc) => ({\r\n          docId: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n\r\n        // 1) Që²ˆí˜¸ ê¸°ì¤€ ì •ë ¬ (Q1 < Q2 < Q10 < Q100 ...)\r\n        list.sort((a, b) => getNumericId(a.id) - getNumericId(b.id));\r\n\r\n        // 2) ì¹´í…Œê³ ë¦¬ë³„ ê·¸ë£¹í•‘\r\n        const grouped = {};\r\n        for (const q of list) {\r\n          const cat = q.category || \"Others\";\r\n          if (!grouped[cat]) grouped[cat] = [];\r\n          grouped[cat].push(q);\r\n        }\r\n\r\n        // 3) êµìˆ˜ë‹˜ì´ ì£¼ì‹  ì„¹ì…˜ ìˆœì„œëŒ€ë¡œ ì •ë ¬ëœ ì„¹ì…˜ ë°°ì—´ ë§Œë“¤ê¸°\r\n        const orderedSections = SECTION_ORDER.reduce((acc, name) => {\r\n          const qs = grouped[name];\r\n          if (qs && qs.length > 0) {\r\n            acc.push({\r\n              name,\r\n              questions: qs,\r\n            });\r\n          }\r\n          return acc;\r\n        }, []);\r\n\r\n        if (orderedSections.length === 0) {\r\n          toast.error(\"No questions found in Firestore\");\r\n        }\r\n\r\n        setSections(orderedSections);\r\n        setCurrentSectionIndex(0);\r\n        setCurrentQuestionIndex(0);\r\n        setAnswers({});\r\n        setFinished(false);\r\n        setStartTime(Date.now());\r\n      } catch (err) {\r\n        console.error(\"âŒ Failed to load questions:\", err);\r\n        toast.error(\"Failed to load questions\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadQuestions();\r\n  }, []);\r\n\r\n  // --------------------------------\r\n  // â„¹ï¸ í˜„ì¬ ì„¹ì…˜ / ë¬¸í•­ ê³„ì‚°\r\n  // --------------------------------\r\n  const currentSection = sections[currentSectionIndex] || null;\r\n  const sectionQuestions = currentSection ? currentSection.questions : [];\r\n  const currentQuestion =\r\n    sectionQuestions.length > 0 ? sectionQuestions[currentQuestionIndex] : null;\r\n\r\n  // ì „ì²´ ë¬¸í•­ ìˆ˜\r\n  const overallTotal = useMemo(\r\n    () => sections.reduce((sum, s) => sum + s.questions.length, 0),\r\n    [sections]\r\n  );\r\n\r\n  // ì§€ê¸ˆê¹Œì§€ ì‘ë‹µ(í˜¹ì€ ìŠ¤í‚µ)í•œ ë¬¸í•­ ìˆ˜ â†’ ì „ì²´ ì§„í–‰ë¥ \r\n  const answeredCount = useMemo(\r\n    () => Object.keys(answers).length,\r\n    [answers]\r\n  );\r\n\r\n  const overallProgress = {\r\n    current: answeredCount,\r\n    total: overallTotal,\r\n  };\r\n\r\n  // í˜„ì¬ ì„¹ì…˜ ë‚´ì—ì„œì˜ ë²ˆí˜¸ (1-based)\r\n  const sectionIndex = currentQuestionIndex + 1;\r\n  const sectionTotal = sectionQuestions.length;\r\n\r\n  // --------------------------------\r\n  // â® ì´ì „ ë¬¸í•­ìœ¼ë¡œ ì´ë™\r\n  // --------------------------------\r\n  const handleBack = () => {\r\n    if (!sections.length) return;\r\n\r\n    // ì²« ì„¹ì…˜ì˜ ì²« ë¬¸í•­ì´ë©´ ë” ì´ìƒ ë’¤ë¡œ ê°ˆ ìˆ˜ ì—†ìŒ\r\n    if (currentSectionIndex === 0 && currentQuestionIndex === 0) return;\r\n\r\n    // ê°™ì€ ì„¹ì…˜ ë‚´ì—ì„œ ì´ì „ ë¬¸í•­\r\n    if (currentQuestionIndex > 0) {\r\n      setCurrentQuestionIndex((prev) => prev - 1);\r\n      setStartTime(Date.now());\r\n      return;\r\n    }\r\n\r\n    // ì´ì „ ì„¹ì…˜ì˜ ë§ˆì§€ë§‰ ë¬¸í•­ìœ¼ë¡œ ì´ë™\r\n    const prevSectionIndex = currentSectionIndex - 1;\r\n    const prevSection = sections[prevSectionIndex];\r\n    const lastIndexInPrevSection = prevSection.questions.length - 1;\r\n\r\n    setCurrentSectionIndex(prevSectionIndex);\r\n    setCurrentQuestionIndex(lastIndexInPrevSection);\r\n    setStartTime(Date.now());\r\n  };\r\n\r\n  // --------------------------------\r\n  // â–¶ ê³µí†µ: ì‘ë‹µ ê¸°ë¡ (ì‹¤ì œ ë‹µë³€, ìŠ¤í‚µ ë‘˜ ë‹¤)\r\n  // --------------------------------\r\n  const recordAnswer = (q, value, skipped = false) => {\r\n    const now = Date.now();\r\n    const timeSpent = (now - startTime) / 1000;\r\n\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [q.docId]: { value, skipped, timeSpent },\r\n    }));\r\n\r\n    // ì ìˆ˜/ê²½í—˜ì¹˜ ë°˜ì˜ (ìŠ¤í‚µë„ ì¼ë‹¨ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\r\n    answerQuestion(timeSpent, \"good\");\r\n    setStartTime(Date.now());\r\n  };\r\n\r\n  // --------------------------------\r\n  // â­ ë‹¤ìŒ ë¬¸í•­ ë˜ëŠ” ë‹¤ìŒ ì„¹ì…˜/ì¢…ë£Œë¡œ ì´ë™\r\n  // --------------------------------\r\n  const goNext = () => {\r\n    if (!sections.length || !currentSection) return;\r\n\r\n    const isLastQuestionInSection =\r\n      currentQuestionIndex >= sectionQuestions.length - 1;\r\n    const isLastSection =\r\n      currentSectionIndex >= sections.length - 1;\r\n\r\n    // ì„¹ì…˜ ë‚´ì—ì„œ ë‹¤ìŒ ë¬¸í•­\r\n    if (!isLastQuestionInSection) {\r\n      setCurrentQuestionIndex((prev) => prev + 1);\r\n      setStartTime(Date.now());\r\n      return;\r\n    }\r\n\r\n    // ë§ˆì§€ë§‰ ì„¹ì…˜ì˜ ë§ˆì§€ë§‰ ë¬¸í•­ â†’ ì„¤ë¬¸ ì¢…ë£Œ\r\n    if (isLastSection) {\r\n      toast.success(\"ğŸ‰ All survey completed!\");\r\n      setFinished(true);\r\n      if (onComplete) onComplete();\r\n      return;\r\n    }\r\n\r\n    // ë‹¤ìŒ ì„¹ì…˜ì˜ ì²« ë¬¸í•­ìœ¼ë¡œ ì´ë™\r\n    setCurrentSectionIndex((prev) => prev + 1);\r\n    setCurrentQuestionIndex(0);\r\n    setStartTime(Date.now());\r\n  };\r\n\r\n  // --------------------------------\r\n  // âœ… ì‹¤ì œ ë‹µë³€(Next)\r\n  // --------------------------------\r\n  const handleAnswer = (value) => {\r\n    if (!currentQuestion) return;\r\n    recordAnswer(currentQuestion, value, false);\r\n    goNext();\r\n  };\r\n\r\n  // --------------------------------\r\n  // â­ Skip (ë‹µë³€ ì—†ì´ ë‹¤ìŒ ë¬¸í•­)\r\n  // --------------------------------\r\n  const handleSkip = () => {\r\n    if (!currentQuestion) return;\r\n    recordAnswer(currentQuestion, null, true);\r\n    goNext();\r\n  };\r\n\r\n  // --------------------------------\r\n  // â© Jump (í˜„ì¬ í¬í•¨ ~ ì„¹ì…˜ ë§ˆì§€ë§‰ ì „ê¹Œì§€ ìŠ¤í‚µ í›„ ë§ˆì§€ë§‰ ë¬¸í•­ìœ¼ë¡œ ì í”„)\r\n  // --------------------------------\r\n  const handleJump = () => {\r\n    if (!currentSection || !currentQuestion) return;\r\n\r\n    const lastIndex = sectionQuestions.length - 1;\r\n    if (currentQuestionIndex >= lastIndex) {\r\n      // ì´ë¯¸ ë§ˆì§€ë§‰ ë¬¸í•­ì´ë©´ ê·¸ëƒ¥ ìœ ì§€\r\n      return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const baseTimeSpent = (now - startTime) / 1000;\r\n\r\n    setAnswers((prev) => {\r\n      const updated = { ...prev };\r\n\r\n      // í˜„ì¬ ~ ë§ˆì§€ë§‰-1 ë¬¸í•­ê¹Œì§€ ëª¨ë‘ ìŠ¤í‚µ ì²˜ë¦¬\r\n      for (let i = currentQuestionIndex; i < lastIndex; i += 1) {\r\n        const q = sectionQuestions[i];\r\n        if (!updated[q.docId]) {\r\n          updated[q.docId] = {\r\n            value: null,\r\n            skipped: true,\r\n            timeSpent: i === currentQuestionIndex ? baseTimeSpent : 0,\r\n          };\r\n        }\r\n      }\r\n\r\n      return updated;\r\n    });\r\n\r\n    // ê²½í—˜ì¹˜ í•˜ë‚˜ë§Œ ë°˜ì˜ (ê³¼í•˜ë‹¤ ì‹¶ìœ¼ë©´ ì œê±° ê°€ëŠ¥)\r\n    answerQuestion(baseTimeSpent, \"good\");\r\n\r\n    // ì„¹ì…˜ ë§ˆì§€ë§‰ ë¬¸í•­ìœ¼ë¡œ ì´ë™\r\n    setCurrentQuestionIndex(lastIndex);\r\n    setStartTime(Date.now());\r\n  };\r\n\r\n  // --------------------------------\r\n  // ğŸ”š ì „ì²´ ì„¤ë¬¸ ì™„ë£Œ ì‹œ EndScene í‘œì‹œ\r\n  // --------------------------------\r\n  if (finished) {\r\n    return <EndScene />;\r\n  }\r\n\r\n  // --------------------------------\r\n  // â³ ë¡œë”© / ì˜ˆì™¸ ì²˜ë¦¬ í™”ë©´\r\n  // --------------------------------\r\n  if (loading) {\r\n    return (\r\n      <div className=\"survey-container\">\r\n        <div className=\"loading-screen\">Loading questions...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentSection || !currentQuestion) {\r\n    return (\r\n      <div className=\"survey-container\">\r\n        <div className=\"loading-screen\">No questions available</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --------------------------------\r\n  // ğŸ”§ QuestionCardì— ë„˜ê¸¸ ë°ì´í„° ì •ë¦¬\r\n  // --------------------------------\r\n  const formatted = {\r\n    text:\r\n      currentQuestion.text?.[lang] ||\r\n      currentQuestion.text?.en ||\r\n      \"\",\r\n    section: currentSection.name,\r\n    type: currentQuestion.type,\r\n    options: getOptionsArray(currentQuestion.options),\r\n    required: true,\r\n  };\r\n\r\n  return (\r\n    <div className=\"survey-container\">\r\n      {/* ìƒë‹¨ ê²Œì„ í—¤ë” (ì „ì²´ ì§„í–‰ë¥  í‘œì‹œ) */}\r\n      <GameHeader overallProgress={overallProgress} />\r\n\r\n      {/* ì‹¤ì œ ì§ˆë¬¸ ì¹´ë“œ */}\r\n      <QuestionCard\r\n        key={currentQuestion.docId}\r\n        question={formatted}\r\n        // ì„¹ì…˜ ë‚´ ë²ˆí˜¸ / ì „ì²´ ë¬¸í•­ ìˆ˜\r\n        questionNumber={sectionIndex}\r\n        totalQuestions={sectionTotal}\r\n        // ì „ì²´ ì§„í–‰ (í•„ìš” ì—†ìœ¼ë©´ QuestionCard ë‚´ë¶€ì—ì„œ ë¬´ì‹œ)\r\n        overallNumber={answeredCount + 1}\r\n        overallTotal={overallTotal}\r\n        // ì„¹ì…˜ ì •ë³´\r\n        chapterNumber={currentSectionIndex + 1}\r\n        chapterName={currentSection.name}\r\n        sectionIndex={sectionIndex}\r\n        sectionTotal={sectionTotal}\r\n        // ë²„íŠ¼ ì•¡ì…˜\r\n        onAnswer={handleAnswer}\r\n        onBack={handleBack}\r\n        onSkip={handleSkip}\r\n        onJump={handleJump}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SurveyGame;\r\n"],"names":["_ref","question","questionNumber","totalQuestions","chapterNumber","chapterName","onAnswer","onBack","onSkip","onJump","optionList","Array","isArray","options","split","map","o","trim","_jsxs","className","children","_jsx","text","type","placeholder","onChange","e","temp","target","value","opt","idx","onClick","disabled","overallProgress","user","gameStats","useGameStore","avatar","name","studentId","department","current","total","style","width","concat","level","experience","streak","coins","EndScene","onComplete","window","location","reload","SECTION_ORDER","getNumericId","id","Number","MAX_SAFE_INTEGER","match","String","_currentQuestion$text","_currentQuestion$text2","answerQuestion","sections","setSections","useState","loading","setLoading","currentSectionIndex","setCurrentSectionIndex","currentQuestionIndex","setCurrentQuestionIndex","answers","setAnswers","startTime","setStartTime","Date","now","finished","setFinished","lang","language","useEffect","async","list","getDocs","collection","db","docs","doc","_objectSpread","docId","data","sort","a","b","grouped","q","cat","category","push","orderedSections","reduce","acc","qs","length","questions","toast","error","err","console","loadQuestions","currentSection","sectionQuestions","currentQuestion","overallTotal","useMemo","sum","s","answeredCount","Object","keys","sectionIndex","sectionTotal","recordAnswer","skipped","arguments","undefined","timeSpent","prev","goNext","isLastQuestionInSection","isLastSection","success","formatted","en","section","filter","required","GameHeader","QuestionCard","overallNumber","handleBack","prevSectionIndex","lastIndexInPrevSection","handleSkip","handleJump","lastIndex","baseTimeSpent","updated","i"],"ignoreList":[],"sourceRoot":""}