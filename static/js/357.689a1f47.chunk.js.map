{"version":3,"file":"static/js/357.689a1f47.chunk.js","mappings":"gMAQA,MAWMA,GAAMC,EAAAA,EAAAA,IAXW,CACrBC,OAAQ,0CACRC,WAAY,uCACZC,YAAa,iFACbC,UAAW,uBACXC,cAAe,2CACfC,kBAAmB,eACnBC,MAAO,8CAOIC,GAAKC,EAAAA,EAAAA,IAAaV,IACXW,EAAAA,EAAAA,IAAQX,IACLY,EAAAA,EAAAA,IAAWZ,GAG3B,IAAIa,EAAY,KACD,qBAAXC,SACTC,EAAAA,EAAAA,MAAcC,KAAKC,IACjB,GAAIA,EACF,IACEJ,GAAYK,EAAAA,EAAAA,IAAalB,EAC3B,CAAE,MAAOmB,GACPC,QAAQC,IAAI,2CACd,IAEDC,MAAM,KACPF,QAAQC,IAAI,0CAKhBE,EAAAA,EAAAA,IAA2Bd,GAAIa,MAAOE,IACnB,wBAAbA,EAAIC,KACNL,QAAQC,IAAI,qJACU,kBAAbG,EAAIC,MACbL,QAAQC,IAAI,+I,uGC5ChB,MAmGMK,EAAoBC,GACnBA,EACDC,MAAMC,QAAQF,GAAiBA,EAEZ,kBAAZA,EACFA,EACJG,MAAM,SACNC,IAAKC,GAAMA,EAAEC,QACbC,OAAQF,GAAMA,EAAEG,OAAS,GAEvB,GATc,GAYvB,EAhHqBC,IAOd,IAPe,SACpBC,EAAQ,eACRC,EAAc,eACdC,EAAc,cACdC,EAAa,aACbC,EAAY,SACZC,GACDN,EACC,MAAOO,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,KAEnC,KAAEC,EAAI,KAAEC,EAAI,QAAEpB,EAAO,QAAEqB,GAAYX,EAgBnCY,EACkB,YAApB,OAAJF,QAAI,IAAJA,OAAI,EAAJA,EAAMG,eAZc,CAClB,8BACA,qBACA,uBACA,wBACA,kCASExB,EAAiBC,GAErB,OACEwB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wBAAuBC,SAAA,EAGpCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUC,SAAA,EACvBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,SAAEL,KAE5BG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mBAAkBC,SAAA,EAC/BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qBAAoBC,SAAA,CAAC,YACxBf,EAAe,MAAIC,MAE/BY,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qBAAoBC,SAAA,CAAC,YACxBb,EAAc,MAAIC,YAMlCa,EAAAA,EAAAA,KAAA,MAAIF,UAAU,SAAQC,SAAEP,IAGd,SAATC,IACCO,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,SACvBJ,EAAalB,IAAI,CAACwB,EAAKC,KACtBF,EAAAA,EAAAA,KAAA,UAEEF,UAAS,YAAAK,OAAcd,IAAaY,EAAM,WAAa,IACvDG,QAASA,IAAMd,EAAYW,GAAKF,SAE/BE,GAJIC,MAWH,SAATT,IACCO,EAAAA,EAAAA,KAAA,YACEF,UAAU,aACVO,YAAY,uBACZC,MAAOjB,EACPkB,SAAWC,GAAMlB,EAAYkB,EAAEC,OAAOH,UAK1CN,EAAAA,EAAAA,KAAA,OAAKF,UAAU,WAAUC,UACvBC,EAAAA,EAAAA,KAAA,UACEF,UAAS,YAAAK,OAAcd,EAAW,SAAW,IAC7CqB,UAAWrB,EACXe,QAASA,KACP,IAAKf,EAAU,OACf,MAAMsB,EAAStB,EACfC,EAAY,IACZF,EAASuB,IACTZ,SACH,sBCxBT,EA9DmBjB,IAA0B,IAAzB,gBAAE8B,GAAiB9B,EACrC,MAAM,KAAE+B,EAAI,UAAEC,IAAcC,EAAAA,EAAAA,KAE5B,OACElB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,cAAaC,SAAA,EAE1BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oBAAmBC,SAAA,EAChCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,cAAaC,UAAM,OAAJc,QAAI,IAAJA,OAAI,EAAJA,EAAMG,SAAU,kBAC9CnB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,eAAcC,SAAA,EAC3BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,UAAM,OAAJc,QAAI,IAAJA,OAAI,EAAJA,EAAMI,OAAQ,aAC1CpB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACnB,OAAJc,QAAI,IAAJA,OAAI,EAAJA,EAAMK,aAAarB,EAAAA,EAAAA,MAAA,QAAAE,SAAA,CAAM,OAAKc,EAAKK,cAC/B,OAAJL,QAAI,IAAJA,OAAI,EAAJA,EAAMM,cAAcnB,EAAAA,EAAAA,KAAA,QAAMF,UAAU,YAAWC,SAAEc,EAAKM,sBAM5DP,IACCf,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2BAA0BC,SAAA,EACvCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,CAAC,qBACVa,EAAgBQ,QAAQ,MAAIR,EAAgBS,UAEjErB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yBAAwBC,UACrCC,EAAAA,EAAAA,KAAA,OACEF,UAAU,oBACVwB,MAAO,CAAEC,MAAM,GAADpB,OAAMS,EAAgBQ,QAAUR,EAAgBS,MAAS,IAAG,cAOlFxB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUC,SAAA,EACvBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,SAAC,YAC3BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,aAAYC,UAAW,OAATe,QAAS,IAATA,OAAS,EAATA,EAAWU,QAAS,KACjDxB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,aAAYC,SAAC,cAG9BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUC,SAAA,EACvBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,SAAC,kBAC3BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,aAAYC,UAAW,OAATe,QAAS,IAATA,OAAS,EAATA,EAAWW,aAAc,KACtDzB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,aAAYC,SAAC,YAG9BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUC,SAAA,EACvBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,SAAC,kBAC3BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,aAAYC,UAAW,OAATe,QAAS,IAATA,OAAS,EAATA,EAAWY,SAAU,KAClD1B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,aAAYC,SAAC,eAG9BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUC,SAAA,EACvBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,SAAC,kBAC3BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,aAAYC,UAAW,OAATe,QAAS,IAATA,OAAS,EAATA,EAAWa,QAAS,KACjD3B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,aAAYC,SAAC,oB,aC9CtC,MA2MA,EAhMmBjB,IAAqB,IAAD8C,EAAAC,EAAA,IAAnB,WAAEC,GAAYhD,EAChC,MAAM,KAAE+B,EAAI,eAAEkB,IAAmBhB,EAAAA,EAAAA,MAE1BiB,EAAWC,IAAgB1C,EAAAA,EAAAA,UAAS,KACpC2C,EAASC,IAAc5C,EAAAA,EAAAA,WAAS,IAGhC6C,EAAiBC,IAAsB9C,EAAAA,EAAAA,UAAS,KAChD+C,EAAcC,IAAmBhD,EAAAA,EAAAA,UAAS,IAG1CiD,EAASC,IAAclD,EAAAA,EAAAA,UAAS,CAAC,IACjCmD,EAAWC,IAAgBpD,EAAAA,EAAAA,UAASqD,KAAKC,OAE1CC,GAAW,OAAJjC,QAAI,IAAJA,OAAI,EAAJA,EAAMkC,WAAY,MAK/BC,EAAAA,EAAAA,WAAU,KACcC,WACpB,IACEd,GAAW,GAEX,MAAMe,GAAIC,EAAAA,EAAAA,IAAMC,EAAAA,EAAAA,IAAWjG,EAAAA,GAAI,cAAckG,EAAAA,EAAAA,IAAQ,OAG/CC,SAFaC,EAAAA,EAAAA,IAAQL,IAETM,KAAK/E,IAAKgF,IAAGC,EAAAA,EAAAA,GAAA,CAC7BC,MAAOF,EAAIG,IACRH,EAAII,SAGT5B,EAAaqB,GAGTA,EAAKzE,OAAS,GAChBwD,EAAmBiB,EAAK,GAAGQ,SAE/B,CAAE,MAAO5F,GACPJ,QAAQD,MAAM,mCAA+BK,GAC7C6F,EAAAA,GAAMlG,MAAM,2BACd,CAAC,QACCsE,GAAW,GACXQ,EAAaC,KAAKC,MACpB,GAGFmB,IACC,IAKH,MAAMC,GAAaC,EAAAA,EAAAA,SACjB,IAAM,IAAI,IAAIC,IAAInC,EAAUvD,IAAKyE,GAAMA,EAAEY,YACzC,CAAC9B,IAMGoC,GAAoBF,EAAAA,EAAAA,SACxB,IAAMlC,EAAUpD,OAAQsE,GAAMA,EAAEY,WAAa1B,GAC7C,CAACJ,EAAWI,IAGRiC,EACJD,EAAkBvF,OAAS,EAAIuF,EAAkB9B,GAAgB,KAK7D1B,GAAkBsD,EAAAA,EAAAA,SAAQ,KAEvB,CAAE9C,QADakD,OAAOC,KAAK/B,GAAS3D,OACVwC,MAAOW,EAAUnD,SACjD,CAAC2D,EAASR,EAAUnD,SAyEvB,GAAIqD,EACF,OACElC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mBAAkBC,UAC/BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,SAAC,2BAKtC,IAAKsE,EACH,OACErE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mBAAkBC,UAC/BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,SAAC,6BAQtC,MAAMyE,EAAY,CAChBhF,MAA0B,QAApBoC,EAAAyC,EAAgB7E,YAAI,IAAAoC,OAAA,EAApBA,EAAuBkB,MAA6B,QAAxBjB,EAAIwC,EAAgB7E,YAAI,IAAAqC,OAAA,EAApBA,EAAsB4C,IAC5D/E,QAAS2E,EAAgBP,SACzBrE,KAAM4E,EAAgB5E,KACtBpB,SAtLqBA,EAsLIgG,EAAgBhG,QArLtCA,EACDC,MAAMC,QAAQF,GAAiBA,EAG5BA,EACJG,MAAM,UACNC,IAAKC,GAAMA,EAAEC,QACbC,OAAQF,GAAMA,EAAEG,OAAS,GAPP,IAsLnB6F,UAAU,GAvLWrG,MA0LvB,OACEwB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mBAAkBC,SAAA,EAC/BC,EAAAA,EAAAA,KAAC2E,EAAU,CAAC/D,gBAAiBA,KAE7BZ,EAAAA,EAAAA,KAAC4E,EAAY,CAEX7F,SAAUyF,EACVxF,eAAgBsD,EAAe,EAC/BrD,eAAgBmF,EAAkBvF,OAClCK,cAvGCmF,EACErC,EAAU6C,UAAW3B,GAAMA,EAAES,QAAUU,EAAgBV,OAAS,EAD1C,EAwGzBxE,aAAc6C,EAAUnD,OACxBO,SAlGgBkB,IACpB,IAAK+D,EAAiB,OAEtB,MACMS,GADMlC,KAAKC,MACQH,GAAa,IAChCqC,EAAMV,EAAgBV,MAG5BlB,EAAYuC,IAAItB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACXsB,GAAI,IACP,CAACD,GAAM,CAAEzE,QAAOwE,gBAIlB/C,EAAe+C,EAAW,QAG1B,MAAMG,EAAY3C,EAAe,EAEjC,GAAI2C,EAAYb,EAAkBvF,OAGhC,OAFA0D,EAAgB0C,QAChBtC,EAAaC,KAAKC,OAOpBkB,EAAAA,GAAMmB,QAAQ,gBAAD/E,OAAOiC,EAAe,mBAGnC,MAAM+C,EAAc,IAAIhB,IACtBG,OAAOC,MAAIb,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIlB,GAAO,IAAE,CAACuC,IAAM,MAI7BK,EAAgBnB,EAAWrF,OAAQyG,GACvCrD,EAAUsD,KACPpC,GAAMA,EAAEY,WAAauB,IAAQF,EAAYI,IAAIrC,EAAES,SAKpD,GAAIyB,EAAcvG,OAAS,EAIzB,OAHAwD,EAAmB+C,EAAc,IACjC7C,EAAgB,QAChBI,EAAaC,KAAKC,OAOpBkB,EAAAA,GAAMmB,QAAQ,sCACVpD,GAAYA,MAsCPuC,EAAgBV,U","sources":["firebase/config.js","components/QuestionCard.jsx","components/GameHeader.jsx","screens/SurveyGame.jsx"],"sourcesContent":["// Firebase ì„¤ì • íŒŒì¼\r\n// ê¹€êµìˆ˜ë‹˜ì˜ Firebase í”„ë¡œì íŠ¸ ì •ë³´\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getFirestore, enableIndexedDbPersistence } from 'firebase/firestore';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { getAnalytics, isSupported } from 'firebase/analytics';\r\nimport { getStorage } from 'firebase/storage';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBqp2_7rcy55Et1NkfRMegiLr5eBIt-N-Q\",\r\n  authDomain: \"ecis-fall2025-survey.firebaseapp.com\",\r\n  databaseURL: \"https://ecis-fall2025-survey-default-rtdb.asia-southeast1.firebasedatabase.app\",\r\n  projectId: \"ecis-fall2025-survey\",\r\n  storageBucket: \"ecis-fall2025-survey.firebasestorage.app\",\r\n  messagingSenderId: \"241188755914\",\r\n  appId: \"1:241188755914:web:cc9242e9c1ccf0c17f9733\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n// Initialize services\r\nexport const db = getFirestore(app);\r\nexport const auth = getAuth(app);\r\nexport const storage = getStorage(app);\r\n\r\n// Analyticsë¥¼ ì•ˆì „í•˜ê²Œ ì´ˆê¸°í™” (measurementId ì—†ì–´ë„ ì—ëŸ¬ ì•ˆë‚¨)\r\nexport let analytics = null;\r\nif (typeof window !== 'undefined') {\r\n  isSupported().then(supported => {\r\n    if (supported) {\r\n      try {\r\n        analytics = getAnalytics(app);\r\n      } catch (error) {\r\n        console.log('Analytics ë¹„í™œì„±í™”ë¨');\r\n      }\r\n    }\r\n  }).catch(() => {\r\n    console.log('Analytics ì§€ì› ì•ˆë¨');\r\n  });\r\n}\r\n\r\n// ì˜¤í”„ë¼ì¸ ì§€ì› í™œì„±í™” (í•™ìƒë“¤ì´ ì¤‘ê°„ì— ë‚˜ê°”ë‹¤ ì™€ë„ ë°ì´í„° ë³´ì¡´)\r\nenableIndexedDbPersistence(db).catch((err) => {\r\n  if (err.code === 'failed-precondition') {\r\n    console.log('ì˜¤í”„ë¼ì¸ ì§€ì›ì´ ì´ë¯¸ ë‹¤ë¥¸ íƒ­ì—ì„œ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.');\r\n  } else if (err.code === 'unimplemented') {\r\n    console.log('í˜„ì¬ ë¸Œë¼ìš°ì €ëŠ” ì˜¤í”„ë¼ì¸ ì§€ì›ì„ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');\r\n  }\r\n});\r\n\r\n// Firestore ì»¬ë ‰ì…˜ ì´ë¦„ ìƒìˆ˜\r\nexport const COLLECTIONS = {\r\n  SURVEYS: 'surveys',\r\n  RESPONSES: 'responses',\r\n  USERS: 'users',\r\n  LEADERBOARD: 'leaderboard',\r\n  ACHIEVEMENTS: 'achievements',\r\n  QUESTIONS: 'questions',\r\n  ANALYTICS: 'analytics'\r\n};\r\n\r\nexport default app;\r\n","import React, { useState } from \"react\";\r\nimport \"./QuestionCard.css\";\r\n\r\nconst QuestionCard = ({\r\n  question,\r\n  questionNumber,\r\n  totalQuestions,\r\n  overallNumber,\r\n  overallTotal,\r\n  onAnswer,\r\n}) => {\r\n  const [selected, setSelected] = useState(\"\");\r\n\r\n  const { text, type, options, section } = question;\r\n\r\n  /** -------------------------------\r\n   * Likert Scale ì˜µì…˜ (Emoji í¬í•¨)\r\n   --------------------------------*/\r\n  const likertScale = [\r\n    \"ğŸ˜ Strongly Agree\",\r\n    \"ğŸ™‚ Agree\",\r\n    \"ğŸ˜ Neutral\",\r\n    \"ğŸ˜• Disagree\",\r\n    \"ğŸ˜¡ Strongly Disagree\",\r\n  ];\r\n\r\n  /** -------------------------------\r\n   * ì˜µì…˜ ê²°ì • (likert / ì¼ë°˜ ê°ê´€ì‹)\r\n   --------------------------------*/\r\n  const finalOptions =\r\n  type?.toLowerCase() === \"likert\"\r\n    ? likertScale\r\n    : normalizeOptions(options);\r\n\r\n  return (\r\n    <div className=\"question-card fade-in\">\r\n      \r\n      {/* ---------- ìƒë‹¨ ì •ë³´ ---------- */}\r\n      <div className=\"q-header\">\r\n        <div className=\"q-section\">{section}</div>\r\n\r\n        <div className=\"q-progress-group\">\r\n          <div className=\"q-progress-chapter\">\r\n            Chapter: {questionNumber} / {totalQuestions}\r\n          </div>\r\n          <div className=\"q-progress-overall\">\r\n            Overall: {overallNumber} / {overallTotal}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ---------- ì§ˆë¬¸ í…ìŠ¤íŠ¸ ---------- */}\r\n      <h2 className=\"q-text\">{text}</h2>\r\n\r\n      {/* ---------- ê°ê´€ì‹ ì˜µì…˜ ---------- */}\r\n      {type !== \"text\" && (\r\n        <div className=\"q-options\">\r\n          {finalOptions.map((opt, idx) => (\r\n            <button\r\n              key={idx}\r\n              className={`q-option ${selected === opt ? \"selected\" : \"\"}`}\r\n              onClick={() => setSelected(opt)}\r\n            >\r\n              {opt}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* ---------- ì£¼ê´€ì‹ ì…ë ¥ ---------- */}\r\n      {type === \"text\" && (\r\n        <textarea\r\n          className=\"q-textarea\"\r\n          placeholder=\"Write your answer...\"\r\n          value={selected}\r\n          onChange={(e) => setSelected(e.target.value)}\r\n        />\r\n      )}\r\n\r\n      {/* ---------- Next ë²„íŠ¼ ---------- */}\r\n      <div className=\"q-footer\">\r\n        <button\r\n          className={`next-btn ${selected ? \"active\" : \"\"}`}\r\n          disabled={!selected}\r\n          onClick={() => {\r\n            if (!selected) return;\r\n            const answer = selected;\r\n            setSelected(\"\"); // ë¨¼ì € ì´ˆê¸°í™”\r\n            onAnswer(answer); // ë¶€ëª¨ì— ì „ë‹¬\r\n          }}\r\n        >\r\n          Next â†’\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n/** ------------------------------------------\r\n * ì˜µì…˜ ì •ê·œí™” í•¨ìˆ˜: SurveyGameì—ì„œ ë°›ì€ ê°’ì´\r\n * ë°°ì—´ì´ë“  ë¬¸ìì—´ì´ë“  í•­ìƒ ë°°ì—´ë¡œ ë³€í™˜\r\n -------------------------------------------*/\r\nconst normalizeOptions = (options) => {\r\n  if (!options) return [];\r\n  if (Array.isArray(options)) return options;\r\n\r\n  if (typeof options === \"string\") {\r\n    return options\r\n      .split(/[\\|,]/)\r\n      .map((o) => o.trim())\r\n      .filter((o) => o.length > 0);\r\n  }\r\n  return [];\r\n};\r\n\r\nexport default QuestionCard;\r\n","import React from \"react\";\r\nimport useGameStore from \"../store/gameStore\";\r\nimport \"./GameHeader.css\";\r\n\r\nconst GameHeader = ({ overallProgress }) => {\r\n  const { user, gameStats } = useGameStore();\r\n\r\n  return (\r\n    <div className=\"game-header\">\r\n      {/* ì‚¬ìš©ì ì •ë³´ ì„¹ì…˜ */}\r\n      <div className=\"user-info-section\">\r\n        <div className=\"user-avatar\">{user?.avatar || \"ğŸ“\"}</div>\r\n        <div className=\"user-details\">\r\n          <div className=\"user-name\">{user?.name || \"Student\"}</div>\r\n          <div className=\"user-meta\">\r\n            {user?.studentId && <span>ID: {user.studentId}</span>}\r\n            {user?.department && <span className=\"user-dept\">{user.department}</span>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì „ì²´ ì§„í–‰ë¥  */}\r\n      {overallProgress && (\r\n        <div className=\"overall-progress-section\">\r\n          <div className=\"progress-text\">\r\n            Overall Progress: {overallProgress.current} / {overallProgress.total}\r\n          </div>\r\n          <div className=\"progress-bar-container\">\r\n            <div \r\n              className=\"progress-bar-fill\" \r\n              style={{ width: `${(overallProgress.current / overallProgress.total) * 100}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ê²Œì„ ìŠ¤íƒ¯ */}\r\n      <div className=\"stats-row\">\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">â­</div>\r\n          <div className=\"stat-value\">{gameStats?.level || 1}</div>\r\n          <div className=\"stat-label\">Level</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸ’¯</div>\r\n          <div className=\"stat-value\">{gameStats?.experience || 0}</div>\r\n          <div className=\"stat-label\">EXP</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸ”¥</div>\r\n          <div className=\"stat-value\">{gameStats?.streak || 0}</div>\r\n          <div className=\"stat-label\">Streak</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸª™</div>\r\n          <div className=\"stat-value\">{gameStats?.coins || 0}</div>\r\n          <div className=\"stat-label\">Coins</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameHeader;\r\n","import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { collection, getDocs, orderBy, query } from \"firebase/firestore\";\r\nimport { db } from \"../firebase/config\";\r\nimport useGameStore from \"../store/gameStore\";\r\nimport QuestionCard from \"../components/QuestionCard\";\r\nimport GameHeader from \"../components/GameHeader\";\r\nimport toast from \"react-hot-toast\";\r\nimport \"../components/SurveyGame.css\";\r\n\r\n/** ---------------------------\r\n * ì˜µì…˜ ë¬¸ìì—´ â†’ ë°°ì—´ ë³€í™˜\r\n * Firestoreê°€ ë¬¸ìì—´/ë°°ì—´ í˜¼ìš©ë¼ë„ í•­ìƒ ì •ìƒ ì²˜ë¦¬\r\n ----------------------------*/\r\nconst getOptionsArray = (options) => {\r\n  if (!options) return [];\r\n  if (Array.isArray(options)) return options;\r\n\r\n  // ë¬¸ìì—´ì¸ ê²½ìš° | ë˜ëŠ” , ë¡œ êµ¬ë¶„\r\n  return options\r\n    .split(/[\\|,]/g)\r\n    .map((o) => o.trim())\r\n    .filter((o) => o.length > 0);\r\n};\r\n\r\nconst SurveyGame = ({ onComplete }) => {\r\n  const { user, answerQuestion } = useGameStore();\r\n\r\n  const [questions, setQuestions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // í˜„ì¬ ì¹´í…Œê³ ë¦¬ / ë¬¸í•­ ì¸ë±ìŠ¤\r\n  const [currentCategory, setCurrentCategory] = useState(\"\");\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n\r\n  // ë‹µë³€ ê¸°ë¡\r\n  const [answers, setAnswers] = useState({});\r\n  const [startTime, setStartTime] = useState(Date.now());\r\n\r\n  const lang = user?.language || \"en\";\r\n\r\n  /** ---------------------------\r\n   * Firestoreì—ì„œ ì§ˆë¬¸ ëª©ë¡ ë¡œë”©\r\n   ----------------------------*/\r\n  useEffect(() => {\r\n    const loadQuestions = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        const q = query(collection(db, \"questions\"), orderBy(\"id\"));\r\n        const snap = await getDocs(q);\r\n\r\n        const list = snap.docs.map((doc) => ({\r\n          docId: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n\r\n        setQuestions(list);\r\n\r\n        // â˜… ì²« ì¹´í…Œê³ ë¦¬ ìë™ ì„¤ì •\r\n        if (list.length > 0) {\r\n          setCurrentCategory(list[0].category);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"âŒ Failed to load questions:\", err);\r\n        toast.error(\"Failed to load questions\");\r\n      } finally {\r\n        setLoading(false);\r\n        setStartTime(Date.now());\r\n      }\r\n    };\r\n\r\n    loadQuestions();\r\n  }, []);\r\n\r\n  /** ---------------------------\r\n   * ì¹´í…Œê³ ë¦¬ ëª©ë¡\r\n   ----------------------------*/\r\n  const categories = useMemo(\r\n    () => [...new Set(questions.map((q) => q.category))],\r\n    [questions]\r\n  );\r\n\r\n  /** ---------------------------\r\n   * í˜„ì¬ ì¹´í…Œê³ ë¦¬ì—ì„œì˜ ë¬¸í•­ í•„í„°ë§\r\n   ----------------------------*/\r\n  const filteredQuestions = useMemo(\r\n    () => questions.filter((q) => q.category === currentCategory),\r\n    [questions, currentCategory]\r\n  );\r\n\r\n  const currentQuestion =\r\n    filteredQuestions.length > 0 ? filteredQuestions[currentIndex] : null;\r\n\r\n  /** ---------------------------\r\n   * ì „ì²´ ì§„í–‰ë¥  ê³„ì‚° (í—¤ë” í‘œì‹œìš©)\r\n   ----------------------------*/\r\n  const overallProgress = useMemo(() => {\r\n    const answeredCount = Object.keys(answers).length;\r\n    return { current: answeredCount, total: questions.length };\r\n  }, [answers, questions.length]);\r\n\r\n  /** ---------------------------\r\n   * ì „ì²´ ë¬¸í•­ ì¤‘ í˜„ì¬ ë¬¸í•­ì˜ ì ˆëŒ€ ë²ˆí˜¸\r\n   ----------------------------*/\r\n  const getCurrentOverallNumber = () => {\r\n    if (!currentQuestion) return 0;\r\n    return questions.findIndex((q) => q.docId === currentQuestion.docId) + 1;\r\n  };\r\n\r\n  /** ---------------------------\r\n   * ë‹µë³€ ì²˜ë¦¬\r\n   ----------------------------*/\r\n  const handleAnswer = (value) => {\r\n    if (!currentQuestion) return;\r\n\r\n    const now = Date.now();\r\n    const timeSpent = (now - startTime) / 1000;\r\n    const qId = currentQuestion.docId;\r\n\r\n    // ê¸°ë¡ ì €ì¥\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [qId]: { value, timeSpent },\r\n    }));\r\n\r\n    // ì ìˆ˜/ê²½í—˜ì¹˜ ë°˜ì˜\r\n    answerQuestion(timeSpent, \"good\");\r\n\r\n    // ë‹¤ìŒ ë¬¸í•­\r\n    const nextIndex = currentIndex + 1;\r\n\r\n    if (nextIndex < filteredQuestions.length) {\r\n      setCurrentIndex(nextIndex);\r\n      setStartTime(Date.now());\r\n      return;\r\n    }\r\n\r\n    /** ---------------------------\r\n     * í˜„ì¬ ì¹´í…Œê³ ë¦¬ ì¢…ë£Œ\r\n     ----------------------------*/\r\n    toast.success(`ğŸ‰ ${currentCategory} ì™„ë£Œ!`);\r\n\r\n    // ì´ë¯¸ ë‹µí•œ ë¬¸í•­ ID ì§‘í•©\r\n    const answeredIds = new Set(\r\n      Object.keys({ ...answers, [qId]: true })\r\n    );\r\n\r\n    // ì•„ì§ í’€ì§€ ì•Šì€ ì¹´í…Œê³ ë¦¬ ì°¾ê¸°\r\n    const remainingCats = categories.filter((cat) =>\r\n      questions.some(\r\n        (q) => q.category === cat && !answeredIds.has(q.docId)\r\n      )\r\n    );\r\n\r\n    // ë‹¤ìŒ ì¹´í…Œê³ ë¦¬ë¡œ ì´ë™\r\n    if (remainingCats.length > 0) {\r\n      setCurrentCategory(remainingCats[0]);\r\n      setCurrentIndex(0);\r\n      setStartTime(Date.now());\r\n      return;\r\n    }\r\n\r\n    /** ---------------------------\r\n     * ì „ì²´ ì„¤ë¬¸ ì¢…ë£Œ\r\n     ----------------------------*/\r\n    toast.success(\"ğŸ¯ All survey completed!\");\r\n    if (onComplete) onComplete();\r\n  };\r\n\r\n  /** ---------------------------\r\n   * ë¡œë”© í™”ë©´\r\n   ----------------------------*/\r\n  if (loading) {\r\n    return (\r\n      <div className=\"survey-container\">\r\n        <div className=\"loading-screen\">Loading questions...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentQuestion) {\r\n    return (\r\n      <div className=\"survey-container\">\r\n        <div className=\"loading-screen\">No questions available</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /** ---------------------------\r\n   * QuestionCard ì „ë‹¬ìš© ì •ì œ ë°ì´í„°\r\n   ----------------------------*/\r\n  const formatted = {\r\n    text: currentQuestion.text?.[lang] || currentQuestion.text?.en,\r\n    section: currentQuestion.category,\r\n    type: currentQuestion.type,\r\n    options: getOptionsArray(currentQuestion.options),\r\n    required: true,\r\n  };\r\n\r\n  return (\r\n    <div className=\"survey-container\">\r\n      <GameHeader overallProgress={overallProgress} />\r\n\r\n      <QuestionCard\r\n        key={currentQuestion.docId}\r\n        question={formatted}\r\n        questionNumber={currentIndex + 1}\r\n        totalQuestions={filteredQuestions.length}\r\n        overallNumber={getCurrentOverallNumber()}\r\n        overallTotal={questions.length}\r\n        onAnswer={handleAnswer}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SurveyGame;\r\n"],"names":["app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","getAuth","getStorage","analytics","window","isSupported","then","supported","getAnalytics","error","console","log","catch","enableIndexedDbPersistence","err","code","normalizeOptions","options","Array","isArray","split","map","o","trim","filter","length","_ref","question","questionNumber","totalQuestions","overallNumber","overallTotal","onAnswer","selected","setSelected","useState","text","type","section","finalOptions","toLowerCase","_jsxs","className","children","_jsx","opt","idx","concat","onClick","placeholder","value","onChange","e","target","disabled","answer","overallProgress","user","gameStats","useGameStore","avatar","name","studentId","department","current","total","style","width","level","experience","streak","coins","_currentQuestion$text","_currentQuestion$text2","onComplete","answerQuestion","questions","setQuestions","loading","setLoading","currentCategory","setCurrentCategory","currentIndex","setCurrentIndex","answers","setAnswers","startTime","setStartTime","Date","now","lang","language","useEffect","async","q","query","collection","orderBy","list","getDocs","docs","doc","_objectSpread","docId","id","data","category","toast","loadQuestions","categories","useMemo","Set","filteredQuestions","currentQuestion","Object","keys","formatted","en","required","GameHeader","QuestionCard","findIndex","timeSpent","qId","prev","nextIndex","success","answeredIds","remainingCats","cat","some","has"],"ignoreList":[],"sourceRoot":""}