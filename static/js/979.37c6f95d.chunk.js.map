{"version":3,"file":"static/js/979.37c6f95d.chunk.js","mappings":"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","sources":["components/QuestionCard.jsx","components/GameHeader.jsx","components/EndScene.jsx","screens/SurveyGame.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./QuestionCard.css\";\r\n\r\nconst QuestionCard = ({\r\n  question,\r\n  questionNumber,\r\n  totalQuestions,\r\n  overallNumber,\r\n  overallTotal,\r\n  onAnswer,\r\n  onSkip,\r\n  onBack,\r\n  onJump,\r\n}) => {\r\n  const [selected, setSelected] = useState(\"\");\r\n\r\n  const { text, type, options, section } = question;\r\n\r\n  // Likert 5ì  ì²™ë„\r\n  const likert = [\r\n    \"ğŸ˜ Strongly Agree\",\r\n    \"ğŸ™‚ Agree\",\r\n    \"ğŸ˜ Neutral\",\r\n    \"ğŸ˜• Disagree\",\r\n    \"ğŸ˜¡ Strongly Disagree\",\r\n  ];\r\n\r\n  // ì˜µì…˜ ë³€í™˜ (ë¬¸ìì—´/ë°°ì—´ ëª¨ë‘ ì§€ì›)\r\n  const getOptionsArray = (options) => {\r\n    if (!options) return [];\r\n    if (Array.isArray(options)) return options;\r\n\r\n    return options\r\n      .split(/[\\|,]/g)\r\n      .map((o) => o.trim())\r\n      .filter((o) => o.length > 0);\r\n  };\r\n\r\n  const answerOptions = type === \"likert\" ? likert : getOptionsArray(options);\r\n\r\n  return (\r\n    <div className=\"question-card fade-in\">\r\n      {/* ìƒë‹¨ ì •ë³´ ì˜ì—­ */}\r\n      <div className=\"q-header\">\r\n        <div className=\"q-section\">Section {section}</div>\r\n        <div className=\"q-progress-group\">\r\n          <div className=\"q-progress-chapter\">\r\n            {questionNumber} / {totalQuestions}\r\n          </div>\r\n          <div className=\"q-progress-overall\">\r\n            Overall: {overallNumber} / {overallTotal}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì§ˆë¬¸ í…ìŠ¤íŠ¸ */}\r\n      <h2 className=\"q-text\">{text}</h2>\r\n\r\n      {/* ê°ê´€ì‹ ì˜µì…˜ (LIKERT / MULTI / SINGLE ëª¨ë‘ ì—¬ê¸°ì—ì„œë§Œ ë Œë”ë§ë¨ â†’ ì¤‘ë³µ ì œê±° ì™„ë£Œ!) */}\r\n      {(type === \"multi\" || type === \"single\" || type === \"likert\") &&\r\n        answerOptions.length > 0 && (\r\n          <div className=\"q-options\">\r\n            {answerOptions.map((opt, idx) => (\r\n              <button\r\n                key={idx}\r\n                className={`q-option ${selected === opt ? \"selected\" : \"\"}`}\r\n                onClick={() => setSelected(opt)}\r\n              >\r\n                {opt}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n      {/* ì£¼ê´€ì‹ í…ìŠ¤íŠ¸ íƒ€ì… */}\r\n      {type === \"text\" && (\r\n        <textarea\r\n          className=\"q-textarea\"\r\n          placeholder=\"Write your answer...\"\r\n          value={selected}\r\n          onChange={(e) => setSelected(e.target.value)}\r\n        />\r\n      )}\r\n\r\n      {/* ë²„íŠ¼ ì˜ì—­ */}\r\n      <div className=\"q-footer\">\r\n\r\n        {/* Back */}\r\n        <button className=\"back-btn\" onClick={onBack}>\r\n          â† Back\r\n        </button>\r\n\r\n        {/* Skip */}\r\n        <button className=\"skip-btn\" onClick={() => onSkip()}>\r\n          â­ Skip\r\n        </button>\r\n\r\n        {/* Jump */}\r\n        <button className=\"jump-btn\" onClick={() => onJump()}>\r\n          âŸ Jump\r\n        </button>\r\n\r\n        {/* Next */}\r\n        <button\r\n          className={`next-btn ${selected ? \"active\" : \"\"}`}\r\n          disabled={!selected}\r\n          onClick={() => {\r\n            if (!selected) return;\r\n            onAnswer(selected);\r\n            setSelected(\"\");\r\n          }}\r\n        >\r\n          Next â†’\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuestionCard;\r\n","import React from \"react\";\r\nimport useGameStore from \"../store/gameStore\";\r\nimport \"./GameHeader.css\";\r\n\r\nconst GameHeader = ({ overallProgress }) => {\r\n  const { user, gameStats } = useGameStore();\r\n\r\n  return (\r\n    <div className=\"game-header\">\r\n      {/* ì‚¬ìš©ì ì •ë³´ ì„¹ì…˜ */}\r\n      <div className=\"user-info-section\">\r\n        <div className=\"user-avatar\">{user?.avatar || \"ğŸ“\"}</div>\r\n        <div className=\"user-details\">\r\n          <div className=\"user-name\">{user?.name || \"Student\"}</div>\r\n          <div className=\"user-meta\">\r\n            {user?.studentId && <span>ID: {user.studentId}</span>}\r\n            {user?.department && <span className=\"user-dept\">{user.department}</span>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì „ì²´ ì§„í–‰ë¥  */}\r\n      {overallProgress && (\r\n        <div className=\"overall-progress-section\">\r\n          <div className=\"progress-text\">\r\n            Overall Progress: {overallProgress.current} / {overallProgress.total}\r\n          </div>\r\n          <div className=\"progress-bar-container\">\r\n            <div \r\n              className=\"progress-bar-fill\" \r\n              style={{ width: `${(overallProgress.current / overallProgress.total) * 100}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ê²Œì„ ìŠ¤íƒ¯ */}\r\n      <div className=\"stats-row\">\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">â­</div>\r\n          <div className=\"stat-value\">{gameStats?.level || 1}</div>\r\n          <div className=\"stat-label\">Level</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸ’¯</div>\r\n          <div className=\"stat-value\">{gameStats?.experience || 0}</div>\r\n          <div className=\"stat-label\">EXP</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸ”¥</div>\r\n          <div className=\"stat-value\">{gameStats?.streak || 0}</div>\r\n          <div className=\"stat-label\">Streak</div>\r\n        </div>\r\n\r\n        <div className=\"stat-box\">\r\n          <div className=\"stat-icon\">ğŸª™</div>\r\n          <div className=\"stat-value\">{gameStats?.coins || 0}</div>\r\n          <div className=\"stat-label\">Coins</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameHeader;\r\n","import React from \"react\";\r\nimport \"./EndScene.css\";\r\n\r\nexport default function EndScene({ onComplete }) {\r\n  return (\r\n    <div className=\"end-scene\">\r\n      <h1>ğŸ‰ Great Job!</h1>\r\n      <p>Your survey game mission has been successfully completed!!.</p>\r\n\r\n      <button\r\n        className=\"end-btn\"\r\n        onClick={onComplete}\r\n      >\r\n        ë¦¬ë”ë³´ë“œ ë³´ê¸° â†’\r\n      </button>\r\n\r\n      <button\r\n        className=\"home-btn\"\r\n        onClick={() => window.location.reload()}\r\n      >\r\n        ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","// src/screens/SurveyGame.jsx  (ë˜ëŠ” í˜„ì¬ ìœ„ì¹˜ì— ë§ê²Œ)\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { collection, getDocs } from \"firebase/firestore\";\r\nimport { db } from \"../firebase/config\";\r\nimport useGameStore from \"../store/gameStore\";\r\nimport QuestionCard from \"../components/QuestionCard\";\r\nimport GameHeader from \"../components/GameHeader\";\r\nimport EndScene from \"../components/EndScene\";\r\nimport toast from \"react-hot-toast\";\r\nimport \"./SurveyGame.css\";\r\n\r\n/**\r\n * âœ… ì„¤ë¬¸ ì„¹ì…˜ ì§„í–‰ ìˆœì„œ (êµìˆ˜ë‹˜ì´ ì£¼ì‹  ìˆœì„œ ê·¸ëŒ€ë¡œ)\r\n */\r\nconst SECTION_ORDER = [\r\n  \"Personal Background\",\r\n  \"Orientation Week Team Building\",\r\n  \"Admissions\",\r\n  \"Faculty\",\r\n  \"Education and Curriculum\",\r\n  \"Academic Advisor\",\r\n  \"Academic Affairs\",\r\n  \"Study Abroad\",\r\n  \"Student Services\",\r\n  \"Residence\",\r\n  \"Facilities\",\r\n  \"IT Resources: SAIS, SMART, E-Mail & Attendance App\",\r\n  \"Library\",\r\n  \"Meals\",\r\n  \"Counseling Services\",\r\n  \"Student Belongingness\",\r\n  \"Extra-curricular Activities\",\r\n  \"Employment in Korea\",\r\n  \"Frequency Mode\",\r\n  \"At a Glance\",\r\n];\r\n\r\n/**\r\n * id: \"Q171\" ì²˜ëŸ¼ ë¬¸ìì—´ì¼ ë•Œ ìˆ«ì ë¶€ë¶„ë§Œ êº¼ë‚´ì„œ ì •ë ¬ì— ì‚¬ìš©\r\n */\r\nconst getNumericId = (id) => {\r\n  if (!id) return Number.MAX_SAFE_INTEGER;\r\n  const match = String(id).match(/\\d+/);\r\n  return match ? Number(match[0]) : Number.MAX_SAFE_INTEGER;\r\n};\r\n\r\n/**\r\n * ì˜µì…˜ ë¬¸ìì—´ â†’ ë°°ì—´ ë³€í™˜\r\n *  - \"A|B|C\" ë˜ëŠ” \"A,B,C\" ëª¨ë‘ ëŒ€ì‘\r\n */\r\nconst getOptionsArray = (options) => {\r\n  if (!options) return [];\r\n  if (Array.isArray(options)) return options;\r\n\r\n  return String(options)\r\n    .split(/[\\|,]/g)\r\n    .map((o) => o.trim())\r\n    .filter((o) => o.length > 0);\r\n};\r\n\r\nconst SurveyGame = ({ onComplete }) => {\r\n  const { user, answerQuestion } = useGameStore();\r\n\r\n  const [sections, setSections] = useState([]); // [{ name, questions: [...] }]\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [currentSectionIndex, setCurrentSectionIndex] = useState(0);\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n\r\n  const [answers, setAnswers] = useState({}); // { docId: { value, skipped, timeSpent } }\r\n  const [startTime, setStartTime] = useState(Date.now());\r\n  const [finished, setFinished] = useState(false);\r\n\r\n  const lang = user?.language || \"en\";\r\n\r\n  // --------------------------------\r\n  // ğŸ”„ Firestoreì—ì„œ ì§ˆë¬¸ ë¡œë”©\r\n  // --------------------------------\r\n  useEffect(() => {\r\n    const loadQuestions = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        const snap = await getDocs(collection(db, \"questions\"));\r\n        let list = snap.docs.map((doc) => ({\r\n          docId: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n\r\n        // 1) Që²ˆí˜¸ ê¸°ì¤€ ì •ë ¬ (Q1 < Q2 < Q10 < Q100 ...)\r\n        list.sort((a, b) => getNumericId(a.id) - getNumericId(b.id));\r\n\r\n        // 2) ì¹´í…Œê³ ë¦¬ë³„ ê·¸ë£¹í•‘\r\n        const grouped = {};\r\n        for (const q of list) {\r\n          const cat = q.category || \"Others\";\r\n          if (!grouped[cat]) grouped[cat] = [];\r\n          grouped[cat].push(q);\r\n        }\r\n\r\n        // 3) êµìˆ˜ë‹˜ì´ ì£¼ì‹  ì„¹ì…˜ ìˆœì„œëŒ€ë¡œ ì •ë ¬ëœ ì„¹ì…˜ ë°°ì—´ ë§Œë“¤ê¸°\r\n        const orderedSections = SECTION_ORDER.reduce((acc, name) => {\r\n          const qs = grouped[name];\r\n          if (qs && qs.length > 0) {\r\n            acc.push({\r\n              name,\r\n              questions: qs,\r\n            });\r\n          }\r\n          return acc;\r\n        }, []);\r\n\r\n        if (orderedSections.length === 0) {\r\n          toast.error(\"No questions found in Firestore\");\r\n        }\r\n\r\n        setSections(orderedSections);\r\n        setCurrentSectionIndex(0);\r\n        setCurrentQuestionIndex(0);\r\n        setAnswers({});\r\n        setFinished(false);\r\n        setStartTime(Date.now());\r\n      } catch (err) {\r\n        console.error(\"âŒ Failed to load questions:\", err);\r\n        toast.error(\"Failed to load questions\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadQuestions();\r\n  }, []);\r\n\r\n  // --------------------------------\r\n  // â„¹ï¸ í˜„ì¬ ì„¹ì…˜ / ë¬¸í•­ ê³„ì‚°\r\n  // --------------------------------\r\n  const currentSection = sections[currentSectionIndex] || null;\r\n  const sectionQuestions = currentSection ? currentSection.questions : [];\r\n  const currentQuestion =\r\n    sectionQuestions.length > 0 ? sectionQuestions[currentQuestionIndex] : null;\r\n\r\n  // ì „ì²´ ë¬¸í•­ ìˆ˜\r\n  const overallTotal = useMemo(\r\n    () => sections.reduce((sum, s) => sum + s.questions.length, 0),\r\n    [sections]\r\n  );\r\n\r\n  // ì§€ê¸ˆê¹Œì§€ ì‘ë‹µ(í˜¹ì€ ìŠ¤í‚µ)í•œ ë¬¸í•­ ìˆ˜ â†’ ì „ì²´ ì§„í–‰ë¥ \r\n  const answeredCount = useMemo(\r\n    () => Object.keys(answers).length,\r\n    [answers]\r\n  );\r\n\r\n  const overallProgress = {\r\n    current: answeredCount,\r\n    total: overallTotal,\r\n  };\r\n\r\n  // í˜„ì¬ ì„¹ì…˜ ë‚´ì—ì„œì˜ ë²ˆí˜¸ (1-based)\r\n  const sectionIndex = currentQuestionIndex + 1;\r\n  const sectionTotal = sectionQuestions.length;\r\n\r\n  // --------------------------------\r\n  // â® ì´ì „ ë¬¸í•­ìœ¼ë¡œ ì´ë™\r\n  // --------------------------------\r\n  const handleBack = () => {\r\n    if (!sections.length) return;\r\n\r\n    // ì²« ì„¹ì…˜ì˜ ì²« ë¬¸í•­ì´ë©´ ë” ì´ìƒ ë’¤ë¡œ ê°ˆ ìˆ˜ ì—†ìŒ\r\n    if (currentSectionIndex === 0 && currentQuestionIndex === 0) return;\r\n\r\n    // ê°™ì€ ì„¹ì…˜ ë‚´ì—ì„œ ì´ì „ ë¬¸í•­\r\n    if (currentQuestionIndex > 0) {\r\n      setCurrentQuestionIndex((prev) => prev - 1);\r\n      setStartTime(Date.now());\r\n      return;\r\n    }\r\n\r\n    // ì´ì „ ì„¹ì…˜ì˜ ë§ˆì§€ë§‰ ë¬¸í•­ìœ¼ë¡œ ì´ë™\r\n    const prevSectionIndex = currentSectionIndex - 1;\r\n    const prevSection = sections[prevSectionIndex];\r\n    const lastIndexInPrevSection = prevSection.questions.length - 1;\r\n\r\n    setCurrentSectionIndex(prevSectionIndex);\r\n    setCurrentQuestionIndex(lastIndexInPrevSection);\r\n    setStartTime(Date.now());\r\n  };\r\n\r\n  // --------------------------------\r\n  // â–¶ ê³µí†µ: ì‘ë‹µ ê¸°ë¡ (ì‹¤ì œ ë‹µë³€, ìŠ¤í‚µ ë‘˜ ë‹¤)\r\n  // --------------------------------\r\n  const recordAnswer = (q, value, skipped = false) => {\r\n    const now = Date.now();\r\n    const timeSpent = (now - startTime) / 1000;\r\n\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [q.docId]: { value, skipped, timeSpent },\r\n    }));\r\n\r\n    // ì ìˆ˜/ê²½í—˜ì¹˜ ë°˜ì˜ (ìŠ¤í‚µë„ ì¼ë‹¨ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\r\n    answerQuestion(timeSpent, \"good\");\r\n    setStartTime(Date.now());\r\n  };\r\n\r\n  // --------------------------------\r\n  // â­ ë‹¤ìŒ ë¬¸í•­ ë˜ëŠ” ë‹¤ìŒ ì„¹ì…˜/ì¢…ë£Œë¡œ ì´ë™\r\n  // --------------------------------\r\n  const goNext = () => {\r\n    if (!sections.length || !currentSection) return;\r\n\r\n    const isLastQuestionInSection =\r\n      currentQuestionIndex >= sectionQuestions.length - 1;\r\n    const isLastSection =\r\n      currentSectionIndex >= sections.length - 1;\r\n\r\n    // ì„¹ì…˜ ë‚´ì—ì„œ ë‹¤ìŒ ë¬¸í•­\r\n    if (!isLastQuestionInSection) {\r\n      setCurrentQuestionIndex((prev) => prev + 1);\r\n      setStartTime(Date.now());\r\n      return;\r\n    }\r\n\r\n    // ë§ˆì§€ë§‰ ì„¹ì…˜ì˜ ë§ˆì§€ë§‰ ë¬¸í•­ â†’ ì„¤ë¬¸ ì¢…ë£Œ\r\n    if (isLastSection) {\r\n      toast.success(\"ğŸ‰ All survey completed!\");\r\n      setFinished(true);\r\n      if (onComplete) onComplete();\r\n      return;\r\n    }\r\n\r\n    // ë‹¤ìŒ ì„¹ì…˜ì˜ ì²« ë¬¸í•­ìœ¼ë¡œ ì´ë™\r\n    setCurrentSectionIndex((prev) => prev + 1);\r\n    setCurrentQuestionIndex(0);\r\n    setStartTime(Date.now());\r\n  };\r\n\r\n  // --------------------------------\r\n  // âœ… ì‹¤ì œ ë‹µë³€(Next)\r\n  // --------------------------------\r\n  const handleAnswer = (value) => {\r\n    if (!currentQuestion) return;\r\n    recordAnswer(currentQuestion, value, false);\r\n    goNext();\r\n  };\r\n\r\n  // --------------------------------\r\n  // â­ Skip (ë‹µë³€ ì—†ì´ ë‹¤ìŒ ë¬¸í•­)\r\n  // --------------------------------\r\n  const handleSkip = () => {\r\n    if (!currentQuestion) return;\r\n    recordAnswer(currentQuestion, null, true);\r\n    goNext();\r\n  };\r\n\r\n  // --------------------------------\r\n  // â© Jump (í˜„ì¬ í¬í•¨ ~ ì„¹ì…˜ ë§ˆì§€ë§‰ ì „ê¹Œì§€ ìŠ¤í‚µ í›„ ë§ˆì§€ë§‰ ë¬¸í•­ìœ¼ë¡œ ì í”„)\r\n  // --------------------------------\r\n  const handleJump = () => {\r\n    if (!currentSection || !currentQuestion) return;\r\n\r\n    const lastIndex = sectionQuestions.length - 1;\r\n    if (currentQuestionIndex >= lastIndex) {\r\n      // ì´ë¯¸ ë§ˆì§€ë§‰ ë¬¸í•­ì´ë©´ ê·¸ëƒ¥ ìœ ì§€\r\n      return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const baseTimeSpent = (now - startTime) / 1000;\r\n\r\n    setAnswers((prev) => {\r\n      const updated = { ...prev };\r\n\r\n      // í˜„ì¬ ~ ë§ˆì§€ë§‰-1 ë¬¸í•­ê¹Œì§€ ëª¨ë‘ ìŠ¤í‚µ ì²˜ë¦¬\r\n      for (let i = currentQuestionIndex; i < lastIndex; i += 1) {\r\n        const q = sectionQuestions[i];\r\n        if (!updated[q.docId]) {\r\n          updated[q.docId] = {\r\n            value: null,\r\n            skipped: true,\r\n            timeSpent: i === currentQuestionIndex ? baseTimeSpent : 0,\r\n          };\r\n        }\r\n      }\r\n\r\n      return updated;\r\n    });\r\n\r\n    // ê²½í—˜ì¹˜ í•˜ë‚˜ë§Œ ë°˜ì˜ (ê³¼í•˜ë‹¤ ì‹¶ìœ¼ë©´ ì œê±° ê°€ëŠ¥)\r\n    answerQuestion(baseTimeSpent, \"good\");\r\n\r\n    // ì„¹ì…˜ ë§ˆì§€ë§‰ ë¬¸í•­ìœ¼ë¡œ ì´ë™\r\n    setCurrentQuestionIndex(lastIndex);\r\n    setStartTime(Date.now());\r\n  };\r\n\r\n  // --------------------------------\r\n  // ğŸ”š ì „ì²´ ì„¤ë¬¸ ì™„ë£Œ ì‹œ EndScene í‘œì‹œ\r\n  // --------------------------------\r\n  if (finished) {\r\n    return <EndScene />;\r\n  }\r\n\r\n  // --------------------------------\r\n  // â³ ë¡œë”© / ì˜ˆì™¸ ì²˜ë¦¬ í™”ë©´\r\n  // --------------------------------\r\n  if (loading) {\r\n    return (\r\n      <div className=\"survey-container\">\r\n        <div className=\"loading-screen\">Loading questions...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentSection || !currentQuestion) {\r\n    return (\r\n      <div className=\"survey-container\">\r\n        <div className=\"loading-screen\">No questions available</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --------------------------------\r\n  // ğŸ”§ QuestionCardì— ë„˜ê¸¸ ë°ì´í„° ì •ë¦¬\r\n  // --------------------------------\r\n  const formatted = {\r\n    text:\r\n      currentQuestion.text?.[lang] ||\r\n      currentQuestion.text?.en ||\r\n      \"\",\r\n    section: currentSection.name,\r\n    type: currentQuestion.type,\r\n    options: getOptionsArray(currentQuestion.options),\r\n    required: true,\r\n  };\r\n\r\n  return (\r\n    <div className=\"survey-container\">\r\n      {/* ìƒë‹¨ ê²Œì„ í—¤ë” (ì „ì²´ ì§„í–‰ë¥  í‘œì‹œ) */}\r\n      <GameHeader overallProgress={overallProgress} />\r\n\r\n      {/* ì‹¤ì œ ì§ˆë¬¸ ì¹´ë“œ */}\r\n      <QuestionCard\r\n        key={currentQuestion.docId}\r\n        question={formatted}\r\n        // ì„¹ì…˜ ë‚´ ë²ˆí˜¸ / ì „ì²´ ë¬¸í•­ ìˆ˜\r\n        questionNumber={sectionIndex}\r\n        totalQuestions={sectionTotal}\r\n        // ì „ì²´ ì§„í–‰ (í•„ìš” ì—†ìœ¼ë©´ QuestionCard ë‚´ë¶€ì—ì„œ ë¬´ì‹œ)\r\n        overallNumber={answeredCount + 1}\r\n        overallTotal={overallTotal}\r\n        // ì„¹ì…˜ ì •ë³´\r\n        chapterNumber={currentSectionIndex + 1}\r\n        chapterName={currentSection.name}\r\n        sectionIndex={sectionIndex}\r\n        sectionTotal={sectionTotal}\r\n        // ë²„íŠ¼ ì•¡ì…˜\r\n        onAnswer={handleAnswer}\r\n        onBack={handleBack}\r\n        onSkip={handleSkip}\r\n        onJump={handleJump}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SurveyGame;\r\n"],"names":["_ref","question","questionNumber","totalQuestions","overallNumber","overallTotal","onAnswer","onSkip","onBack","onJump","selected","setSelected","useState","text","type","options","section","answerOptions","Array","isArray","split","map","o","trim","filter","length","getOptionsArray","_jsxs","className","children","_jsx","opt","idx","concat","onClick","placeholder","value","onChange","e","target","disabled","overallProgress","user","gameStats","useGameStore","avatar","name","studentId","department","current","total","style","width","level","experience","streak","coins","EndScene","onComplete","window","location","reload","SECTION_ORDER","getNumericId","id","Number","MAX_SAFE_INTEGER","match","String","_currentQuestion$text","_currentQuestion$text2","answerQuestion","sections","setSections","loading","setLoading","currentSectionIndex","setCurrentSectionIndex","currentQuestionIndex","setCurrentQuestionIndex","answers","setAnswers","startTime","setStartTime","Date","now","finished","setFinished","lang","language","useEffect","async","list","getDocs","collection","db","docs","doc","_objectSpread","docId","data","sort","a","b","grouped","q","cat","category","push","orderedSections","reduce","acc","qs","questions","toast","error","err","console","loadQuestions","currentSection","sectionQuestions","currentQuestion","useMemo","sum","s","answeredCount","Object","keys","sectionIndex","sectionTotal","recordAnswer","skipped","arguments","undefined","timeSpent","prev","goNext","isLastQuestionInSection","isLastSection","success","formatted","en","required","GameHeader","QuestionCard","chapterNumber","chapterName","handleBack","prevSectionIndex","lastIndexInPrevSection","handleSkip","handleJump","lastIndex","baseTimeSpent","updated","i"],"ignoreList":[],"sourceRoot":""}