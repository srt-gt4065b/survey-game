{"version":3,"file":"static/js/979.3f3e6f15.chunk.js","mappings":"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","sources":["components/QuestionCard.jsx","components/GameHeader.jsx","components/EndScene.jsx","screens/SurveyGame.jsx"],"sourcesContent":["import React from \"react\";\nimport \"./QuestionCard.css\";\n\nexport default function QuestionCard({\n  question,\n  answer,\n  onAnswer,\n  language = \"ko\",\n}) {\n  if (!question) return null;\n\n  const { type, text, options } = question;\n\n  // Ïñ∏Ïñ¥Î≥Ñ ÌÖçÏä§Ìä∏ ÏÑ†ÌÉù\n  const localizedText = text?.[language] || text?.en || \"\";\n\n  // ÏòµÏÖò Î∞∞Ïó¥ ÌôïÎ≥¥\n  const optionsArray = Array.isArray(options) ? options : [];\n\n  return (\n    <div className=\"question-card\">\n      <div className=\"question-text\">{localizedText}</div>\n\n      {/* TEXT */}\n      {type === \"Text\" && (\n        <textarea\n          className=\"text-input\"\n          placeholder=\"Write your answer...\"\n          value={answer || \"\"}\n          onChange={(e) => onAnswer(e.target.value)}\n        />\n      )}\n\n      {/* MULTI (Ïòà: Regular / Transfer / Exchange Îì±) */}\n      {type === \"Multi\" && (\n        <div className=\"options-container\">\n          {optionsArray.map((opt, index) => (\n            <div\n              key={index}\n              className={`option-item ${\n                answer === opt ? \"selected\" : \"\"\n              }`}\n              onClick={() => onAnswer(opt)}\n            >\n              {opt}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* LIKERT (Strongly Agree ~ Strongly Disagree) */}\n      {type === \"Likert\" && (\n        <div className=\"options-container\">\n          {optionsArray.map((opt, index) => (\n            <div\n              key={index}\n              className={`option-item ${\n                answer === opt ? \"selected\" : \"\"\n              }`}\n              onClick={() => onAnswer(opt)}\n            >\n              {opt}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport useGameStore from \"../store/gameStore\";\nimport \"./GameHeader.css\";\n\nconst GameHeader = ({ overallProgress }) => {\n  const { user, gameStats } = useGameStore();\n\n  return (\n    <div className=\"game-header\">\n      {/* ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏÑπÏÖò */}\n      <div className=\"user-info-section\">\n        <div className=\"user-avatar\">{user?.avatar || \"üéì\"}</div>\n        <div className=\"user-details\">\n          <div className=\"user-name\">{user?.name || \"Student\"}</div>\n          <div className=\"user-meta\">\n            {user?.studentId && <span>ID: {user.studentId}</span>}\n            {user?.department && <span className=\"user-dept\">{user.department}</span>}\n          </div>\n        </div>\n      </div>\n\n      {/* Ï†ÑÏ≤¥ ÏßÑÌñâÎ•† */}\n      {overallProgress && (\n        <div className=\"overall-progress-section\">\n          <div className=\"progress-text\">\n            Overall Progress: {overallProgress.current} / {overallProgress.total}\n          </div>\n          <div className=\"progress-bar-container\">\n            <div \n              className=\"progress-bar-fill\" \n              style={{ width: `${(overallProgress.current / overallProgress.total) * 100}%` }}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Í≤åÏûÑ Ïä§ÌÉØ */}\n      <div className=\"stats-row\">\n        <div className=\"stat-box\">\n          <div className=\"stat-icon\">‚≠ê</div>\n          <div className=\"stat-value\">{gameStats?.level || 1}</div>\n          <div className=\"stat-label\">Level</div>\n        </div>\n\n        <div className=\"stat-box\">\n          <div className=\"stat-icon\">üíØ</div>\n          <div className=\"stat-value\">{gameStats?.experience || 0}</div>\n          <div className=\"stat-label\">EXP</div>\n        </div>\n\n        <div className=\"stat-box\">\n          <div className=\"stat-icon\">üî•</div>\n          <div className=\"stat-value\">{gameStats?.streak || 0}</div>\n          <div className=\"stat-label\">Streak</div>\n        </div>\n\n        <div className=\"stat-box\">\n          <div className=\"stat-icon\">ü™ô</div>\n          <div className=\"stat-value\">{gameStats?.coins || 0}</div>\n          <div className=\"stat-label\">Coins</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameHeader;\n","import React from \"react\";\nimport \"./EndScene.css\";\n\nexport default function EndScene({ onComplete }) {\n  return (\n    <div className=\"end-scene\">\n      <div className=\"end-scene-card\">\n        <div className=\"celebration-emoji\">üéâ</div>\n        <h1>Great Job!</h1>\n        <p>Your survey game mission has been successfully completed!</p>\n        <p className=\"thank-you\">Thank you for your valuable feedback.</p>\n\n        <div className=\"end-buttons\">\n          {onComplete && (\n            <button className=\"end-btn primary\" onClick={onComplete}>\n              üèÜ View Leaderboard\n            </button>\n          )}\n\n          <button\n            className=\"end-btn secondary\"\n            onClick={() => window.location.reload()}\n          >\n            üè† Return to Home\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","// src/screens/SurveyGame.jsx  (ÎòêÎäî ÌòÑÏû¨ ÏúÑÏπòÏóê ÎßûÍ≤å)\n\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { collection, getDocs } from \"firebase/firestore\";\nimport { db } from \"../firebase/config\";\nimport useGameStore from \"../store/gameStore\";\nimport QuestionCard from \"../components/QuestionCard\";\nimport GameHeader from \"../components/GameHeader\";\nimport EndScene from \"../components/EndScene\";\nimport toast from \"react-hot-toast\";\nimport \"./SurveyGame.css\";\n\n/**\n * ‚úÖ ÏÑ§Î¨∏ ÏÑπÏÖò ÏßÑÌñâ ÏàúÏÑú (ÍµêÏàòÎãòÏù¥ Ï£ºÏã† ÏàúÏÑú Í∑∏ÎåÄÎ°ú)\n */\nconst SECTION_ORDER = [\n  \"Personal Background\",\n  \"Orientation Week Team Building\",\n  \"Admissions\",\n  \"Faculty\",\n  \"Education and Curriculum\",\n  \"Academic Advisor\",\n  \"Academic Affairs\",\n  \"Study Abroad\",\n  \"Student Services\",\n  \"Residence\",\n  \"Facilities\",\n  \"IT Resources: SAIS, SMART, E-Mail & Attendance App\",\n  \"Library\",\n  \"Meals\",\n  \"Counseling Services\",\n  \"Student Belongingness\",\n  \"Extra-curricular Activities\",\n  \"Employment in Korea\",\n  \"Frequency Mode\",\n  \"At a Glance\",\n];\n\n/**\n * id: \"Q171\" Ï≤òÎüº Î¨∏ÏûêÏó¥Ïùº Îïå Ïà´Ïûê Î∂ÄÎ∂ÑÎßå Í∫ºÎÇ¥ÏÑú Ï†ïÎ†¨Ïóê ÏÇ¨Ïö©\n */\nconst getNumericId = (id) => {\n  if (!id) return Number.MAX_SAFE_INTEGER;\n  const match = String(id).match(/\\d+/);\n  return match ? Number(match[0]) : Number.MAX_SAFE_INTEGER;\n};\n\n/**\n * ÏòµÏÖò Î¨∏ÏûêÏó¥ ‚Üí Î∞∞Ïó¥ Î≥ÄÌôò\n *  - \"A|B|C\" ÎòêÎäî \"A,B,C\" Î™®Îëê ÎåÄÏùë\n */\nconst getOptionsArray = (options) => {\n  if (!options) return [];\n  if (Array.isArray(options)) return options;\n\n  return String(options)\n    .split(/[\\|,]/g)\n    .map((o) => o.trim())\n    .filter((o) => o.length > 0);\n};\n\nconst SurveyGame = ({ onComplete }) => {\n  const { user, answerQuestion } = useGameStore();\n\n  const [sections, setSections] = useState([]); // [{ name, questions: [...] }]\n  const [loading, setLoading] = useState(true);\n\n  const [currentSectionIndex, setCurrentSectionIndex] = useState(0);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n\n  const [answers, setAnswers] = useState({}); // { docId: { value, skipped, timeSpent } }\n  const [startTime, setStartTime] = useState(Date.now());\n  const [finished, setFinished] = useState(false);\n\n  const lang = user?.language || \"en\";\n\n  // --------------------------------\n  // üîÑ FirestoreÏóêÏÑú ÏßàÎ¨∏ Î°úÎî©\n  // --------------------------------\n  useEffect(() => {\n    const loadQuestions = async () => {\n      try {\n        setLoading(true);\n\n        const snap = await getDocs(collection(db, \"questions\"));\n        let list = snap.docs.map((doc) => ({\n          docId: doc.id,\n          ...doc.data(),\n        }));\n\n        // 1) QÎ≤àÌò∏ Í∏∞Ï§Ä Ï†ïÎ†¨ (Q1 < Q2 < Q10 < Q100 ...)\n        list.sort((a, b) => getNumericId(a.id) - getNumericId(b.id));\n\n        // 2) Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ Í∑∏Î£πÌïë\n        const grouped = {};\n        for (const q of list) {\n          const cat = q.category || \"Others\";\n          if (!grouped[cat]) grouped[cat] = [];\n          grouped[cat].push(q);\n        }\n\n        // 3) ÍµêÏàòÎãòÏù¥ Ï£ºÏã† ÏÑπÏÖò ÏàúÏÑúÎåÄÎ°ú Ï†ïÎ†¨Îêú ÏÑπÏÖò Î∞∞Ïó¥ ÎßåÎì§Í∏∞\n        const orderedSections = SECTION_ORDER.reduce((acc, name) => {\n          const qs = grouped[name];\n          if (qs && qs.length > 0) {\n            acc.push({\n              name,\n              questions: qs,\n            });\n          }\n          return acc;\n        }, []);\n\n        if (orderedSections.length === 0) {\n          toast.error(\"No questions found in Firestore\");\n        }\n\n        setSections(orderedSections);\n        setCurrentSectionIndex(0);\n        setCurrentQuestionIndex(0);\n        setAnswers({});\n        setFinished(false);\n        setStartTime(Date.now());\n      } catch (err) {\n        console.error(\"‚ùå Failed to load questions:\", err);\n        toast.error(\"Failed to load questions\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadQuestions();\n  }, []);\n\n  // --------------------------------\n  // ‚ÑπÔ∏è ÌòÑÏû¨ ÏÑπÏÖò / Î¨∏Ìï≠ Í≥ÑÏÇ∞\n  // --------------------------------\n  const currentSection = sections[currentSectionIndex] || null;\n  const sectionQuestions = currentSection ? currentSection.questions : [];\n  const currentQuestion =\n    sectionQuestions.length > 0 ? sectionQuestions[currentQuestionIndex] : null;\n\n  // Ï†ÑÏ≤¥ Î¨∏Ìï≠ Ïàò\n  const overallTotal = useMemo(\n    () => sections.reduce((sum, s) => sum + s.questions.length, 0),\n    [sections]\n  );\n\n  // ÏßÄÍ∏àÍπåÏßÄ ÏùëÎãµ(ÌòπÏùÄ Ïä§ÌÇµ)Ìïú Î¨∏Ìï≠ Ïàò ‚Üí Ï†ÑÏ≤¥ ÏßÑÌñâÎ•†\n  const answeredCount = useMemo(\n    () => Object.keys(answers).length,\n    [answers]\n  );\n\n  const overallProgress = {\n    current: answeredCount,\n    total: overallTotal,\n  };\n\n  // ÌòÑÏû¨ ÏÑπÏÖò ÎÇ¥ÏóêÏÑúÏùò Î≤àÌò∏ (1-based)\n  const sectionIndex = currentQuestionIndex + 1;\n  const sectionTotal = sectionQuestions.length;\n\n  // --------------------------------\n  // ‚èÆ Ïù¥Ï†Ñ Î¨∏Ìï≠ÏúºÎ°ú Ïù¥Îèô\n  // --------------------------------\n  const handleBack = () => {\n    if (!sections.length) return;\n\n    // Ï≤´ ÏÑπÏÖòÏùò Ï≤´ Î¨∏Ìï≠Ïù¥Î©¥ Îçî Ïù¥ÏÉÅ Îí§Î°ú Í∞à Ïàò ÏóÜÏùå\n    if (currentSectionIndex === 0 && currentQuestionIndex === 0) return;\n\n    // Í∞ôÏùÄ ÏÑπÏÖò ÎÇ¥ÏóêÏÑú Ïù¥Ï†Ñ Î¨∏Ìï≠\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex((prev) => prev - 1);\n      setStartTime(Date.now());\n      return;\n    }\n\n    // Ïù¥Ï†Ñ ÏÑπÏÖòÏùò ÎßàÏßÄÎßâ Î¨∏Ìï≠ÏúºÎ°ú Ïù¥Îèô\n    const prevSectionIndex = currentSectionIndex - 1;\n    const prevSection = sections[prevSectionIndex];\n    const lastIndexInPrevSection = prevSection.questions.length - 1;\n\n    setCurrentSectionIndex(prevSectionIndex);\n    setCurrentQuestionIndex(lastIndexInPrevSection);\n    setStartTime(Date.now());\n  };\n\n  // --------------------------------\n  // ‚ñ∂ Í≥µÌÜµ: ÏùëÎãµ Í∏∞Î°ù (Ïã§Ï†ú ÎãµÎ≥Ä, Ïä§ÌÇµ Îëò Îã§)\n  // --------------------------------\n  const recordAnswer = (q, value, skipped = false) => {\n    const now = Date.now();\n    const timeSpent = (now - startTime) / 1000;\n\n    setAnswers((prev) => ({\n      ...prev,\n      [q.docId]: { value, skipped, timeSpent },\n    }));\n\n    // Ï†êÏàò/Í≤ΩÌóòÏπò Î∞òÏòÅ (Ïä§ÌÇµÎèÑ ÏùºÎã® ÎèôÏùºÌïòÍ≤å Ï≤òÎ¶¨)\n    answerQuestion(timeSpent, \"good\");\n    setStartTime(Date.now());\n  };\n\n  // --------------------------------\n  // ‚è≠ Îã§Ïùå Î¨∏Ìï≠ ÎòêÎäî Îã§Ïùå ÏÑπÏÖò/Ï¢ÖÎ£åÎ°ú Ïù¥Îèô\n  // --------------------------------\n  const goNext = () => {\n    if (!sections.length || !currentSection) return;\n\n    const isLastQuestionInSection =\n      currentQuestionIndex >= sectionQuestions.length - 1;\n    const isLastSection =\n      currentSectionIndex >= sections.length - 1;\n\n    // ÏÑπÏÖò ÎÇ¥ÏóêÏÑú Îã§Ïùå Î¨∏Ìï≠\n    if (!isLastQuestionInSection) {\n      setCurrentQuestionIndex((prev) => prev + 1);\n      setStartTime(Date.now());\n      return;\n    }\n\n    // ÎßàÏßÄÎßâ ÏÑπÏÖòÏùò ÎßàÏßÄÎßâ Î¨∏Ìï≠ ‚Üí ÏÑ§Î¨∏ Ï¢ÖÎ£å\n    if (isLastSection) {\n      toast.success(\"üéâ All survey completed!\");\n      setFinished(true);\n      if (onComplete) onComplete();\n      return;\n    }\n\n    // Îã§Ïùå ÏÑπÏÖòÏùò Ï≤´ Î¨∏Ìï≠ÏúºÎ°ú Ïù¥Îèô\n    setCurrentSectionIndex((prev) => prev + 1);\n    setCurrentQuestionIndex(0);\n    setStartTime(Date.now());\n  };\n\n  // --------------------------------\n  // ‚úÖ Ïã§Ï†ú ÎãµÎ≥Ä(Next)\n  // --------------------------------\n  const handleAnswer = (value) => {\n    if (!currentQuestion) return;\n    recordAnswer(currentQuestion, value, false);\n    goNext();\n  };\n\n  // --------------------------------\n  // ‚è≠ Skip (ÎãµÎ≥Ä ÏóÜÏù¥ Îã§Ïùå Î¨∏Ìï≠)\n  // --------------------------------\n  const handleSkip = () => {\n    if (!currentQuestion) return;\n    recordAnswer(currentQuestion, null, true);\n    goNext();\n  };\n\n  // --------------------------------\n  // ‚è© Jump (ÌòÑÏû¨ Ìè¨Ìï® ~ ÏÑπÏÖò ÎßàÏßÄÎßâ Ï†ÑÍπåÏßÄ Ïä§ÌÇµ ÌõÑ ÎßàÏßÄÎßâ Î¨∏Ìï≠ÏúºÎ°ú Ï†êÌîÑ)\n  // --------------------------------\n  const handleJump = () => {\n    if (!currentSection || !currentQuestion) return;\n\n    const lastIndex = sectionQuestions.length - 1;\n    if (currentQuestionIndex >= lastIndex) {\n      // Ïù¥ÎØ∏ ÎßàÏßÄÎßâ Î¨∏Ìï≠Ïù¥Î©¥ Í∑∏ÎÉ• Ïú†ÏßÄ\n      return;\n    }\n\n    const now = Date.now();\n    const baseTimeSpent = (now - startTime) / 1000;\n\n    setAnswers((prev) => {\n      const updated = { ...prev };\n\n      // ÌòÑÏû¨ ~ ÎßàÏßÄÎßâ-1 Î¨∏Ìï≠ÍπåÏßÄ Î™®Îëê Ïä§ÌÇµ Ï≤òÎ¶¨\n      for (let i = currentQuestionIndex; i < lastIndex; i += 1) {\n        const q = sectionQuestions[i];\n        if (!updated[q.docId]) {\n          updated[q.docId] = {\n            value: null,\n            skipped: true,\n            timeSpent: i === currentQuestionIndex ? baseTimeSpent : 0,\n          };\n        }\n      }\n\n      return updated;\n    });\n\n    // Í≤ΩÌóòÏπò ÌïòÎÇòÎßå Î∞òÏòÅ (Í≥ºÌïòÎã§ Ïã∂ÏúºÎ©¥ Ï†úÍ±∞ Í∞ÄÎä•)\n    answerQuestion(baseTimeSpent, \"good\");\n\n    // ÏÑπÏÖò ÎßàÏßÄÎßâ Î¨∏Ìï≠ÏúºÎ°ú Ïù¥Îèô\n    setCurrentQuestionIndex(lastIndex);\n    setStartTime(Date.now());\n  };\n\n  // --------------------------------\n  // üîö Ï†ÑÏ≤¥ ÏÑ§Î¨∏ ÏôÑÎ£å Ïãú EndScene ÌëúÏãú\n  // --------------------------------\n  if (finished) {\n    return <EndScene onComplete={onComplete} />;\n  }\n\n  // --------------------------------\n  // ‚è≥ Î°úÎî© / ÏòàÏô∏ Ï≤òÎ¶¨ ÌôîÎ©¥\n  // --------------------------------\n  if (loading) {\n    return (\n      <div className=\"survey-container\">\n        <div className=\"loading-screen\">Loading questions...</div>\n      </div>\n    );\n  }\n\n  if (!currentSection || !currentQuestion) {\n    return (\n      <div className=\"survey-container\">\n        <div className=\"loading-screen\">No questions available</div>\n      </div>\n    );\n  }\n\n  // --------------------------------\n  // üîß QuestionCardÏóê ÎÑòÍ∏∏ Îç∞Ïù¥ÌÑ∞ Ï†ïÎ¶¨\n  // --------------------------------\n  const formatted = {\n    text:\n      currentQuestion.text?.[lang] ||\n      currentQuestion.text?.en ||\n      \"\",\n    section: currentSection.name,\n    type: currentQuestion.type,\n    options: getOptionsArray(currentQuestion.options),\n    required: true,\n  };\n\n  return (\n    <div className=\"survey-container\">\n      {/* ÏÉÅÎã® Í≤åÏûÑ Ìó§Îçî (Ï†ÑÏ≤¥ ÏßÑÌñâÎ•† ÌëúÏãú) */}\n      <GameHeader overallProgress={overallProgress} />\n\n      {/* Ïã§Ï†ú ÏßàÎ¨∏ Ïπ¥Îìú */}\n      <QuestionCard\n        key={currentQuestion.docId}\n        question={formatted}\n        // ÏÑπÏÖò ÎÇ¥ Î≤àÌò∏ / Ï†ÑÏ≤¥ Î¨∏Ìï≠ Ïàò\n        questionNumber={sectionIndex}\n        totalQuestions={sectionTotal}\n        // Ï†ÑÏ≤¥ ÏßÑÌñâ (ÌïÑÏöî ÏóÜÏúºÎ©¥ QuestionCard ÎÇ¥Î∂ÄÏóêÏÑú Î¨¥Ïãú)\n        overallNumber={answeredCount + 1}\n        overallTotal={overallTotal}\n        // ÏÑπÏÖò Ï†ïÎ≥¥\n        chapterNumber={currentSectionIndex + 1}\n        chapterName={currentSection.name}\n        sectionIndex={sectionIndex}\n        sectionTotal={sectionTotal}\n        // Î≤ÑÌäº Ïï°ÏÖò\n        onAnswer={handleAnswer}\n        onBack={handleBack}\n        onSkip={handleSkip}\n        onJump={handleJump}\n      />\n    </div>\n  );\n};\n\nexport default SurveyGame;\n"],"names":["QuestionCard","_ref","question","answer","onAnswer","language","type","text","options","localizedText","en","optionsArray","Array","isArray","_jsxs","className","children","_jsx","placeholder","value","onChange","e","target","map","opt","index","concat","onClick","overallProgress","user","gameStats","useGameStore","avatar","name","studentId","department","current","total","style","width","level","experience","streak","coins","EndScene","onComplete","window","location","reload","SECTION_ORDER","getNumericId","id","Number","MAX_SAFE_INTEGER","match","String","_currentQuestion$text","_currentQuestion$text2","answerQuestion","sections","setSections","useState","loading","setLoading","currentSectionIndex","setCurrentSectionIndex","currentQuestionIndex","setCurrentQuestionIndex","answers","setAnswers","startTime","setStartTime","Date","now","finished","setFinished","lang","useEffect","async","list","getDocs","collection","db","docs","doc","_objectSpread","docId","data","sort","a","b","grouped","q","cat","category","push","orderedSections","reduce","acc","qs","length","questions","toast","error","err","console","loadQuestions","currentSection","sectionQuestions","currentQuestion","overallTotal","useMemo","sum","s","answeredCount","Object","keys","sectionIndex","sectionTotal","recordAnswer","skipped","arguments","undefined","timeSpent","prev","goNext","isLastQuestionInSection","isLastSection","success","formatted","section","split","o","trim","filter","required","GameHeader","questionNumber","totalQuestions","overallNumber","chapterNumber","chapterName","onBack","handleBack","prevSectionIndex","lastIndexInPrevSection","onSkip","handleSkip","onJump","handleJump","lastIndex","baseTimeSpent","updated","i"],"ignoreList":[],"sourceRoot":""}